var fe;!function(e){const a=new URL(location.toString()).searchParams.get("base")||"/";new((()=>{class a{constructor(e=self,a="/",r=[]){this.service=e,this.base=a,this.cacheUrls=r,e.customServiceWorker=this}register(){if(!this.service)throw new Error("Invalid service [ServiceWorkerGlobalScope]");this.service.onsync=this.onSync.bind(this),this.service.onactivate=this.onActivate.bind(this),this.service.onfetch=this.onFetch.bind(this),this.service.oninstall=this.onInstall.bind(this),this.service.onmessage=this.onMessage.bind(this)}onInstall(e){e.waitUntil(new Promise(e=>{this.initializeCache().then(()=>{e(this.service.skipWaiting())})}))}async onActivate(e){e.waitUntil(new Promise(e=>{this.flushCache().then(()=>{e(this.service.skipWaiting())})}))}onFetch(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(caches.match(e.request).then(a=>a||this.service.fetch(e.request,{credentials:"same-origin"}).then(a=>{if(!a||200!==a.status||"basic"!==a.type)return a;const r=a.clone();return caches.open(this.cacheId("fetch")).then(a=>{a.put(e.request,r)}).catch(e=>{throw e}),a})))}onMessage(r){if(r&&r.data&&r.data.type)switch(r.data.type){case"GET_VERSION":r.ports[0].postMessage(a.version);break;case"CONTENT_CACHED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_CACHED")})});break;case"CONTENT_UPDATED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_UPDATED")})});break;case"CLIENTS_CLAIM":this.service.clients.claim();break;case"SKIP_WAITING":this.service.skipWaiting();break;case"GET_MODELS":(new e.ModelCollector).collect().then(a=>{const i=new e.ModelProcessor(a);r.ports[0].postMessage(i.model)})}else this.log("message raw",r)}async onSync(a){switch(a.tag){case"UPDATE_MODEL":const a=new e.ModelCollector,r=await a.collect(),i=new e.ModelProcessor(r).model;this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage(i)})})}}log(...e){console.log(`%c${a.id}-${a.version}`,["background: #000080","border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.em"].join(";"),e)}cacheId(e){return`${e}-${a.version}`}initializeCache(){return new Promise((e,a)=>{caches.open(this.cacheId("install")).then(e=>e.addAll(this.cacheUrls.map(e=>`${this.base}${e}`))).then(e).catch(a)})}flushCache(){const e=[this.cacheId("install"),this.cacheId("fetch"),this.cacheId("data")];return new Promise((a,r)=>{caches.keys().then(r=>{a(Promise.all(r.map(a=>-1===e.indexOf(a)?caches.delete(a):Promise.resolve(!0))))}).catch(r)})}}return a.id="ServiceWorker",a.version="0.0.1",a})())(self,a,[{revision:"b6a28c9f8a7136fb90891872a4588195",url:"404.html"},{revision:"ad1d435755d9f771a263a5bcebf64062",url:"favicon.ico"},{revision:"92963933d27c2e84edf9fc8ca5a2a25f",url:"favicon/android-chrome-144x144.png"},{revision:"9777c9df9a62d135bc2ae9432c04fae8",url:"favicon/android-chrome-192x192.png"},{revision:"f5323f831917c69aa159343c74083e2c",url:"favicon/android-chrome-256x256.png"},{revision:"172ce1875283a79ae0af8004f47bab49",url:"favicon/android-chrome-36x36.png"},{revision:"1976671274e62e6b175574c64117ecd1",url:"favicon/android-chrome-384x384.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/android-chrome-48x48.png"},{revision:"caabaae5a194d59c48b1474e0493a8ee",url:"favicon/android-chrome-512x512.png"},{revision:"afa7d3e0dc605f0127ea4ce4e68c2316",url:"favicon/android-chrome-72x72.png"},{revision:"ed22b2edfc9f0b9470c5dbbaf0fce155",url:"favicon/android-chrome-96x96.png"},{revision:"b12dcabbcc292742d1797577b8bc804a",url:"favicon/apple-touch-icon-1024x1024.png"},{revision:"56cedd5a4fb5281dc5db81f1634f58f8",url:"favicon/apple-touch-icon-114x114.png"},{revision:"9e058ada59e59855793e327c1b310e55",url:"favicon/apple-touch-icon-120x120.png"},{revision:"d4061951f3c0e03ce9ab1442c4ab7e28",url:"favicon/apple-touch-icon-144x144.png"},{revision:"8ee59a93c0329dc1b6108e42001f3e56",url:"favicon/apple-touch-icon-152x152.png"},{revision:"3680a43ebfc9f1afa4669ae80a3969ce",url:"favicon/apple-touch-icon-167x167.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-180x180.png"},{revision:"22df1fd6fdd24903692d0c4a43f6fd87",url:"favicon/apple-touch-icon-57x57.png"},{revision:"dfba8e05bedc5eacfa3a4e0242d447bb",url:"favicon/apple-touch-icon-60x60.png"},{revision:"2df3c9216eb35360e956d48e2c29c5d4",url:"favicon/apple-touch-icon-72x72.png"},{revision:"7684e01a2d0057de2ea5570e8968de38",url:"favicon/apple-touch-icon-76x76.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-precomposed.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon.png"},{revision:"5986e58932aa21b0995e447d9e36e4d0",url:"favicon/favicon-16x16.png"},{revision:"184e641ca4e317be415af5170b8cc493",url:"favicon/favicon-32x32.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/favicon-48x48.png"},{revision:"86bff67cfe290f6e1bfb24010150b371",url:"importmap.json"},{revision:"d1949262e010e9ab423b419a8a9c435a",url:"index.html"},{revision:"4cd06362d6dbdf9c9e70e4f5f32cd5c7",url:"manifest.json"},{revision:"5e0bd1c281a62a380d7a948085bfe2d1",url:"robots.txt"},{revision:"f5dd07b647d92555a879ecc4d114ab56",url:"script/application.js"},{revision:"ddebf57b7a411a288026a06d944bf77f",url:"script/components/layouts/default/index.js"},{revision:"165fa37755fb3e562c5c274d3279e30f",url:"script/components/organisms/countries/index.js"},{revision:"39ab690b4faaead822e43ef82392674f",url:"script/components/organisms/footer/index.js"},{revision:"4112ad1a875303f77506343e314e27b7",url:"script/components/organisms/header/index.js"},{revision:"509cfe1c9e3d41c7c847215f9d12d7a8",url:"script/components/organisms/latest/index.js"},{revision:"b403ab750a00a287ef928d8c7ac7a6c3",url:"script/components/organisms/main/index.js"},{revision:"da5196c4a9e3842c478c8bdf18c206da",url:"script/components/organisms/nav/index.js"},{revision:"4088df6365906922684168e03e80cf60",url:"script/components/organisms/plot/index.js"},{revision:"6a4d6382055247e2b5e12dbc3b5948ac",url:"script/components/organisms/series/index.js"},{revision:"3282e1931fd6e5c6322d51f4cc2b0501",url:"script/components/organisms/spinner/index.js"},{revision:"6c36d9691c5797409fb1ec65ec31fd6f",url:"script/components/pages/about/index.js"},{revision:"fc26a39b559c307cd09b0b140727bd9a",url:"script/components/pages/detail/index.js"},{revision:"d035dec8445450e77ce688597f93d294",url:"script/components/pages/font/index.js"},{revision:"aed76e300b5fb35c0efd42b79d26bb36",url:"script/components/pages/home/index.js"},{revision:"bb3616d6ad4ad5ca62d2c5d1ab239337",url:"script/fonts.js"},{revision:"83ca8cdeefe5db1c5544fae76dabc346",url:"script/index.js"},{revision:"77f4286048c08aca4b95b3b0c534a2ed",url:"script/loading.js"},{revision:"5bf071a2b31241408a20274416cc2d1d",url:"script/model/index.js"},{revision:"1a92657ba1c863b0d6e02168ba0a2c6f",url:"script/model/sorter/index.js"},{revision:"367d72db3ce9e97438a28fa4a2a9b5d8",url:"script/states/avrg/index.js"},{revision:"0a482a4bbf2473d9622f1e439ce0cae5",url:"script/states/models/index.js"},{revision:"28f600893c95a1cf5bb96e867ece2db6",url:"script/states/type/index.js"},{revision:"b89f6eaa45d6749b3b4b6daeef3f05a3",url:"script/states/version/index.js"},{revision:"ddac45256c424d70a9617c85eb426d87",url:"script/states/world/index.js"},{revision:"584873d2eadd3db0771b10e430602a27",url:"styles.css"},{revision:"a6241ea58346d28ef25c8d1e3bebb030",url:"vendor/@fortawesome/fontawesome-svg-core.js"},{revision:"c6233ca754d998f4ad7894ab8af6af08",url:"vendor/@fortawesome/free-brands-svg-icons.js"},{revision:"9243833119d01de9af673687a103e84b",url:"vendor/@fortawesome/free-regular-svg-icons.js"},{revision:"9f181027a61200c4cfba37873371a8ff",url:"vendor/@fortawesome/free-solid-svg-icons.js"},{revision:"ff0a5c0fb6f67002cd19142b673b28ae",url:"vendor/@fortawesome/react-fontawesome.js"},{revision:"d297254e14c855082237d92ae7708aa9",url:"vendor/clsx.js"},{revision:"63f1f6ca5568b6b5710c63f74fdf4281",url:"vendor/d3-array.js"},{revision:"c35488bcf6bf78c06ce217cae1c2a46f",url:"vendor/d3-color.js"},{revision:"2071a3ce4cc114edcf138267bfb55ff2",url:"vendor/d3-format.js"},{revision:"8e268a7a11c54f1c242d2435b72b5b9e",url:"vendor/d3-interpolate.js"},{revision:"46951c7a05a36ba15ca6ffa37f4f9f18",url:"vendor/d3-path.js"},{revision:"ef0abf7a90dea42abb7e668d73166fce",url:"vendor/d3-scale.js"},{revision:"318dc3f5ea669c2d01d52a223e16c423",url:"vendor/d3-shape.js"},{revision:"22e93e29aaf60e86798db2dcace24a29",url:"vendor/d3-time-format.js"},{revision:"ab27a2140e31119222bc514fa79fff97",url:"vendor/d3-time.js"},{revision:"1ebf8a031da50e24441d3d4582070cbd",url:"vendor/es-module-shims.js"},{revision:"1aeae482d7842e0b5f7a2794c1b5ec72",url:"vendor/idb.js"},{revision:"4a255c54496d3adf7c1a56d77beff06c",url:"vendor/object-assign.js"},{revision:"7c3e9bb53a76ab474078430abde9a186",url:"vendor/prop-types.js"},{revision:"cb1f9ba8c368d0f6680207dd85c2737c",url:"vendor/react-dom.js"},{revision:"f1ef850b8585980a8eccbca05969e1a5",url:"vendor/react-is.js"},{revision:"a24739f7fa0fa459664d655659a2241c",url:"vendor/react-router-dom.js"},{revision:"32b717b5a2eed8bd51f247395dfb4360",url:"vendor/react-router.js"},{revision:"7122e7a79889d49baf0550a7643d89fb",url:"vendor/react-smooth.js"},{revision:"284e3a578e89d5a6c090f752298c89c4",url:"vendor/react-transition-group.js"},{revision:"9129313f72f45edfafe6d6bd8660ecda",url:"vendor/react.js"},{revision:"ae4ac4e7d934b3eeb45682f6c890d4f8",url:"vendor/recharts-scale.js"},{revision:"a74d4a5e72fa66da097b95ea228ff724",url:"vendor/recharts.js"},{revision:"8296aaea2d2a46fb72dc8ec762d22e5a",url:"vendor/recoil.js"},{revision:"ec42b514c57a94e2338dff696f757f9a",url:"vendor/scheduler.js"},{revision:"91b3aef31abb2b51de12c4012104bb30",url:"vendor/workbox-window.js"}].map(e=>e.url)).register()}(fe||(fe={})),function(e){const a={undefined:!1,fieldSeparator:",",lineSeparator:"\n",quote:'"'},r=(e,a)=>{if(!a.undefined||e.length)return e},i=(e,a,r)=>{a.push(e),r.field++,r.fieldOffset=-1,r.appendField=!1},s=(e,a,r)=>{a.push(e),r.field=0,r.line++,r.lineOffset=-1,r.appendRow=!1},t=(e,t=a)=>new Promise(c=>{((e,t=a)=>{const c=Object.assign({},a,t),o={field:0,fieldOffset:0,line:0,lineOffset:0,quoted:!1,appendCell:!1,appendField:!1,appendRow:!1};return new Promise((a,t)=>{if(e.length){const n=[];let d=[],f="";for(let a=0;a<e.length;a++)o.appendCell=!0,e[a]===c.quote?a&&"\\"!==e[a-1]?(!f.length||o.quoted?o.quoted=!o.quoted:t(Error(`Invalid CSV text at offset ${o.line}:${o.lineOffset}`)),o.appendCell=!1):f=f.substr(0,f.length-1):e[a]===c.fieldSeparator?o.quoted||(o.appendCell=!1,o.appendField=!0):e[a]===c.lineSeparator&&(o.quoted||(o.appendCell=!1,o.appendField=!0,o.appendRow=!0)),o.appendCell&&(f+=e[a]),o.appendField&&(i(r(f,c),d,o),f=""),o.appendRow&&(s(d,n,o),d=[]),o.lineOffset++,o.fieldOffset++;d.length&&(i(r(f,c),d,o),s(d,n,o)),a(n)}else t(Error("Empty CSV text"))})})(e,t).then(e=>{const a=e[0].filter(e=>"string"==typeof e);c(e.filter((e,a)=>a>0).map(e=>{const r={};return a.forEach((a,i)=>{r[a]=e[i]}),r}))})});class c{map(e){return e.map(e=>this._map(e)).sort((e,a)=>{const r=e.country.localeCompare(a.country);return 0===r?e.state.localeCompare(a.state):r})}_map(e){const a={values:[]};return Object.keys(e).forEach(r=>{if(r.match(/State/))a.state=e[r];else if(r.match(/Country/))a.country=e[r].replace(/\*/,"");else if(r.match(/Lat/))a.lat=parseFloat(e[r]);else if(r.match(/Long/))a.lon=parseFloat(e[r]);else{const i=parseInt(e[r],10),s=new Date(r),t=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate());a.values.push({timestamp:t,value:i})}}),a.values.sort((e,a)=>e.timestamp-a.timestamp),Object.freeze(a)}}class o{map(e){return e.map(e=>this._map(e)).sort((e,a)=>{const r=e.country.localeCompare(a.country);return 0===r?e.state.localeCompare(a.state):r})}_map(e){const a={};return Object.keys(e).forEach(r=>{r.match(/State/)?a.state=e[r]:r.match(/Country/)?a.country=e[r].replace(/\*/,""):r.match(/Lat/)?a.lat=parseFloat(e[r]):r.match(/Long/)?a.lon=parseFloat(e[r]):r.match(/Population/)?a.population=parseInt(e[r]):r.match(/UID/)?a.uid=parseInt(e[r]):r.match(/iso2/)?a.iso2=e[r]:r.match(/iso3/)?a.iso3=e[r]:r.match(/code3/)?a.code3=parseInt(e[r]):r.match(/FIPS/)?a.fips=parseInt(e[r]):r.match(/Admin2/)&&(a.admin2=e[r])}),Object.freeze(a)}}let n;!function(e){e.CONFIRMED="confirmed",e.DEATHS="deaths",e.RECOVERED="recovered",e.LOOKUP="lookup"}(n||(n={})),e.ModelCollector=class{constructor(e=new c,a=new o){this._modelMapper=e,this._lookupMapper=a}async collect(){const e=await this._fetchLookup(),a=await this._fetchModel(n.CONFIRMED),r=await this._fetchModel(n.DEATHS),i=await this._fetchModel(n.RECOVERED);return this.merge(a,r,i,e)}findSeries(e,a){const r=a.find(a=>a.timestamp===e);return r?r.value:0}async merge(e,a,r,i){return new Promise(s=>{s(e.filter(e=>"Canada"!==e.country||"Recovered"!==e.state).map(e=>{const s=i.find(a=>{let r=a.country.localeCompare(e.country);return 0===r&&(r=a.state.localeCompare(e.state)),0===r}),t=a.find(a=>a.country===e.country&&a.state===e.state),c=r.find(a=>a.country===e.country&&a.state===e.state),o=e.values.map(e=>Object.freeze({confirmed:e.value,deaths:this.findSeries(e.timestamp,t?t.values:[]),recovered:this.findSeries(e.timestamp,c?c.values:[]),timestamp:e.timestamp}));return Object.freeze({country:e.country,lat:e.lat,lon:e.lon,state:e.state,population:s&&s.population||0,values:Object.freeze(o)})}))})}async _fetchModel(e){return this._fetch(e).then(e=>t(e)).then(e=>this._modelMapper.map(e))}async _fetchLookup(){return this._fetch(n.LOOKUP).then(e=>t(e)).then(e=>this._lookupMapper.map(e))}async _fetch(e){const a=new Request(this._fetchUrl(e),{headers:this._fetchHeaders(),method:"GET"});return(await fetch(a)).text()}_fetchHeaders(){return{"Accept-Encoding":"gzip, deflate, br"}}_fetchUrl(e){return e===n.LOOKUP?"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/UID_ISO_FIPS_LookUp_Table.csv":`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_${e}_global.csv`}},e.ModelProcessor=class{constructor(e){this._model=[],e&&e.length&&(this._model=this.process(e))}get model(){return this._model}process(e){return e.map(e=>{const a=e.population?e.population/1e5:1,r={country:e.country,population:e.population};return e.state&&e.state.length&&(r.state=e.state),r.values=e.values.map((e,r,i)=>{const s={5:this.avrg(5,r,i),7:this.avrg(7,r,i),14:this.avrg(14,r,i),21:this.avrg(21,r,i),28:this.avrg(28,r,i)},t=this.diff(e,r,i),c={confirmed:e.confirmed,dead:e.deaths,recovered:e.recovered,active:this.active(e)};return{...c,diff:t,avrg:s,ratio:{...this.ratio(c,a),diff:this.ratio(t,a),avrg:{5:this.ratio(s[5],a),7:this.ratio(s[7],a),14:this.ratio(s[14],a),21:this.ratio(s[21],a),28:this.ratio(s[28],a)}},timestamp:e.timestamp}}),r})}diff(e,a,r){return a?{confirmed:e.confirmed-r[a-1].confirmed,dead:e.deaths-r[a-1].deaths,recovered:e.recovered-r[a-1].recovered,active:this.active(e)-this.active(r[a-1])}:{confirmed:0,dead:0,recovered:0,active:0}}avrg(e,a,r){if(a){const i={confirmed:0,dead:0,recovered:0,active:0};let s=0;for(let t=a;t>a-e&&t>0;t--){const e=this.diff(r[t],t,r);i.confirmed+=e.confirmed,i.dead+=e.dead,i.recovered+=e.recovered,i.active+=e.active,s++}return s?{confirmed:i.confirmed/s,dead:i.dead/s,recovered:i.recovered/s,active:i.active/s}:i}return{confirmed:r[a].confirmed,dead:r[a].deaths,recovered:r[a].recovered,active:this.active(r[a])}}active(e){return e.confirmed-e.deaths-e.recovered}ratio(e,a){return{confirmed:e.confirmed/a,dead:e.dead/a,recovered:e.recovered/a,active:e.active/a}}}}(fe||(fe={}));