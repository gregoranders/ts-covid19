var Kc;!function(e){const r=new URL(location.toString()).searchParams.get("base")||"/";class o{constructor(e=self,r="/",o=[]){this.service=e,this.base=r,this.cacheUrls=o,e.customServiceWorker=this,this.base}register(){if(!this.service)throw new Error("Invalid service [ServiceWorkerGlobalScope]");this.service.onsync=this.onSync.bind(this),this.service.onactivate=this.onActivate.bind(this),this.service.onfetch=this.onFetch.bind(this),this.service.oninstall=this.onInstall.bind(this),this.service.onmessage=this.onMessage.bind(this)}onInstall(e){e.waitUntil(new Promise(e=>{this.initializeCache().then(()=>{e(this.service.skipWaiting())})}))}async onActivate(e){e.waitUntil(new Promise(e=>{this.flushCache().then(()=>{e(this.service.skipWaiting())})}))}onFetch(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(caches.match(e.request).then(r=>r||this.service.fetch(e.request,{credentials:"same-origin"}).then(r=>{if(!r||200!==r.status||"basic"!==r.type)return r;const o=r.clone();return caches.open(this.cacheId("fetch")).then(r=>{r.put(e.request,o)}).catch(e=>{throw e}),r})))}onMessage(r){if(r&&r.data&&r.data.type)switch(r.data.type){case"GET_VERSION":r.ports[0].postMessage(o.version);break;case"CONTENT_CACHED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_CACHED")})});break;case"CONTENT_UPDATED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_UPDATED")})});break;case"CLIENTS_CLAIM":this.service.clients.claim();break;case"SKIP_WAITING":this.service.skipWaiting();break;case"GET_MODELS":(new e.ModelCollector).collect().then(o=>{const a=new e.ModelProcessor(o);r.ports[0].postMessage(a.model)})}else this.log("message raw",r)}async onSync(r){switch(r.tag){case"UPDATE_MODEL":const r=new e.ModelCollector,o=await r.collect(),a=new e.ModelProcessor(o).model;this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage(a)})})}}log(...e){const r=["background: #000080","border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.em"];console.log(`%c${o.id}-${o.version}`,r.join(";"),e)}cacheId(e){return`${e}-${o.version}`}initializeCache(){return new Promise((e,r)=>{caches.open(this.cacheId("install")).then(e=>e.addAll(this.cacheUrls.map(e=>""+e))).then(e).catch(r)})}flushCache(){const e=[this.cacheId("install"),this.cacheId("fetch"),this.cacheId("data")];return new Promise((r,o)=>{caches.keys().then(o=>{r(Promise.all(o.map(r=>-1===e.indexOf(r)?caches.delete(r):Promise.resolve(!0))))}).catch(o)})}}o.id="ServiceWorker",o.version="0.0.1";new o(self,r,([{revision:"b6a28c9f8a7136fb90891872a4588195",url:"404.html"},{revision:"ad1d435755d9f771a263a5bcebf64062",url:"favicon.ico"},{revision:"92963933d27c2e84edf9fc8ca5a2a25f",url:"favicon/android-chrome-144x144.png"},{revision:"9777c9df9a62d135bc2ae9432c04fae8",url:"favicon/android-chrome-192x192.png"},{revision:"f5323f831917c69aa159343c74083e2c",url:"favicon/android-chrome-256x256.png"},{revision:"172ce1875283a79ae0af8004f47bab49",url:"favicon/android-chrome-36x36.png"},{revision:"1976671274e62e6b175574c64117ecd1",url:"favicon/android-chrome-384x384.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/android-chrome-48x48.png"},{revision:"caabaae5a194d59c48b1474e0493a8ee",url:"favicon/android-chrome-512x512.png"},{revision:"afa7d3e0dc605f0127ea4ce4e68c2316",url:"favicon/android-chrome-72x72.png"},{revision:"ed22b2edfc9f0b9470c5dbbaf0fce155",url:"favicon/android-chrome-96x96.png"},{revision:"b12dcabbcc292742d1797577b8bc804a",url:"favicon/apple-touch-icon-1024x1024.png"},{revision:"56cedd5a4fb5281dc5db81f1634f58f8",url:"favicon/apple-touch-icon-114x114.png"},{revision:"9e058ada59e59855793e327c1b310e55",url:"favicon/apple-touch-icon-120x120.png"},{revision:"d4061951f3c0e03ce9ab1442c4ab7e28",url:"favicon/apple-touch-icon-144x144.png"},{revision:"8ee59a93c0329dc1b6108e42001f3e56",url:"favicon/apple-touch-icon-152x152.png"},{revision:"3680a43ebfc9f1afa4669ae80a3969ce",url:"favicon/apple-touch-icon-167x167.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-180x180.png"},{revision:"22df1fd6fdd24903692d0c4a43f6fd87",url:"favicon/apple-touch-icon-57x57.png"},{revision:"dfba8e05bedc5eacfa3a4e0242d447bb",url:"favicon/apple-touch-icon-60x60.png"},{revision:"2df3c9216eb35360e956d48e2c29c5d4",url:"favicon/apple-touch-icon-72x72.png"},{revision:"7684e01a2d0057de2ea5570e8968de38",url:"favicon/apple-touch-icon-76x76.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-precomposed.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon.png"},{revision:"5986e58932aa21b0995e447d9e36e4d0",url:"favicon/favicon-16x16.png"},{revision:"184e641ca4e317be415af5170b8cc493",url:"favicon/favicon-32x32.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/favicon-48x48.png"},{revision:"86bff67cfe290f6e1bfb24010150b371",url:"importmap.json"},{revision:"6a2952b09c8b88b3f87195a98c6e1ac7",url:"index.html"},{revision:"4cd06362d6dbdf9c9e70e4f5f32cd5c7",url:"manifest.json"},{revision:"5e0bd1c281a62a380d7a948085bfe2d1",url:"robots.txt"},{revision:"889921c2700fa5b377303e175ffe878c",url:"script/application.js"},{revision:"ebaf22cdcdedd0f2613109189965b939",url:"script/components/layouts/default/index.js"},{revision:"2ccbda62e4e63cc0d9c32d8d9dd81356",url:"script/components/organisms/countries/index.js"},{revision:"34dced4a71f37b83611bc13c4ef614fd",url:"script/components/organisms/footer/index.js"},{revision:"77d4c054b01363cbd352702f75e6e18d",url:"script/components/organisms/header/index.js"},{revision:"7a7a5e78e2485dd3c024b59fc847dbb5",url:"script/components/organisms/latest/index.js"},{revision:"4345f15bf0935d65aaeb9b42abd7ad33",url:"script/components/organisms/main/index.js"},{revision:"26005f7e296a71be520121aba9516bc2",url:"script/components/organisms/nav/index.js"},{revision:"bb05c11cd69b4eb9709decc9b1340606",url:"script/components/organisms/plot/index.js"},{revision:"2bd84cce7a3d30a7f1aa4bc45a5683fb",url:"script/components/organisms/series/index.js"},{revision:"b4f5e4478ce18c959ab78aefdb725641",url:"script/components/organisms/spinner/index.js"},{revision:"33603d851ba221113bec51eb45412813",url:"script/components/pages/about/index.js"},{revision:"64aa3cfa98fcd288d2d8b53f4b9ffbeb",url:"script/components/pages/detail/index.js"},{revision:"55cb09aeb259f2910f39721060fb473c",url:"script/components/pages/font/index.js"},{revision:"063138019413c001c26791795a160afa",url:"script/components/pages/home/index.js"},{revision:"8d65363be2dc9eb53cfac628329efa51",url:"script/fonts.js"},{revision:"56b69d371117de5c8abda162f29af8c4",url:"script/index.js"},{revision:"af607fd0502f38e18ed4ed4f2633b925",url:"script/loading.js"},{revision:"5fa11e2c4654fccbfad4e12f2472bd20",url:"script/model/index.js"},{revision:"7344047acf1bfdeef4f8e55f448b54e5",url:"script/model/sorter/index.js"},{revision:"203408ad33c112bc123421c08df644d7",url:"script/states/avrg/index.js"},{revision:"ea4a35304b45b68f3bd41a80c8f212de",url:"script/states/models/index.js"},{revision:"cf4394c264c73e43084a28141d41359a",url:"script/states/type/index.js"},{revision:"5eea8c253c85a26293c518879b5c1eec",url:"script/states/version/index.js"},{revision:"0619f18d6583443a347c1d859816d1a7",url:"script/states/world/index.js"},{revision:"1c2da25c280ff55f60cb7085354370f6",url:"styles.css"},{revision:"669ab42084e0336038e55dadd84d62a5",url:"vendor/@fortawesome/fontawesome-svg-core.js"},{revision:"1b1542bf579ee14d5aa2733b0aa974af",url:"vendor/@fortawesome/free-brands-svg-icons.js"},{revision:"9243833119d01de9af673687a103e84b",url:"vendor/@fortawesome/free-regular-svg-icons.js"},{revision:"f58638167b3bb05ba0ba6dcf5390ee53",url:"vendor/@fortawesome/free-solid-svg-icons.js"},{revision:"32d6f94a22d97dc7f2bd282bd2e63626",url:"vendor/@fortawesome/react-fontawesome.js"},{revision:"d297254e14c855082237d92ae7708aa9",url:"vendor/clsx.js"},{revision:"63f1f6ca5568b6b5710c63f74fdf4281",url:"vendor/d3-array.js"},{revision:"7c6f98df3d22362b78a8ef05f5119140",url:"vendor/d3-color.js"},{revision:"2071a3ce4cc114edcf138267bfb55ff2",url:"vendor/d3-format.js"},{revision:"b509768972c3982578f1217d3124e339",url:"vendor/d3-interpolate.js"},{revision:"46951c7a05a36ba15ca6ffa37f4f9f18",url:"vendor/d3-path.js"},{revision:"00c410bb0463f4bcdbc718ab4ca8e08f",url:"vendor/d3-scale.js"},{revision:"0c439508a299c3d9ecfbbccfd90237cb",url:"vendor/d3-shape.js"},{revision:"f8f7acf7b471f49199fabb21b299e828",url:"vendor/d3-time-format.js"},{revision:"e6645d379cf262a127fce8c0c9a3db2f",url:"vendor/d3-time.js"},{revision:"1ebf8a031da50e24441d3d4582070cbd",url:"vendor/es-module-shims.js"},{revision:"659499b8e5efe81c3f98b3bf7cce4fe7",url:"vendor/idb.js"},{revision:"1d8ed6dd13a5a05ff7e153cc84303ea0",url:"vendor/object-assign.js"},{revision:"464aaef75ab780271b0306ca3a8870cc",url:"vendor/prop-types.js"},{revision:"047a510eb50621c2023516285c6b5490",url:"vendor/react-dom.js"},{revision:"bd64e0ca0fd9f11b06181d6bc263903e",url:"vendor/react-is.js"},{revision:"092163b331bf8a7f3f13808525f5ba21",url:"vendor/react-router-dom.js"},{revision:"30263baf293d6a6329a6987f8faa0932",url:"vendor/react-router.js"},{revision:"80d442be4782bec791900604c8623b42",url:"vendor/react-smooth.js"},{revision:"77ddca464055e2b36530b50d3eb02b7f",url:"vendor/react-transition-group.js"},{revision:"1f3a68241233355c252f48a42d5fcba3",url:"vendor/react.js"},{revision:"702b4a6099104cdef0892083ad99423f",url:"vendor/recharts-scale.js"},{revision:"46e0bd23e77a994d701ee16666db3c4c",url:"vendor/recharts.js"},{revision:"8296aaea2d2a46fb72dc8ec762d22e5a",url:"vendor/recoil.js"},{revision:"ec42b514c57a94e2338dff696f757f9a",url:"vendor/scheduler.js"},{revision:"e957123dad78b6bd0e761eff9632506d",url:"vendor/workbox-v5.1.3/workbox-background-sync.prod.js"},{revision:"ec32d25a234fda34c7c6494e2d96b720",url:"vendor/workbox-v5.1.3/workbox-broadcast-update.prod.js"},{revision:"e3b710a6e2be8c81ddc4729ca127c391",url:"vendor/workbox-v5.1.3/workbox-cacheable-response.prod.js"},{revision:"10d2199248a94d14b3a33db6a9bc5859",url:"vendor/workbox-v5.1.3/workbox-core.prod.js"},{revision:"8da4447fa82aae93b1dcfd0f33a0ce21",url:"vendor/workbox-v5.1.3/workbox-expiration.prod.js"},{revision:"4c3c758ca1f50dd6381e80e2521bc647",url:"vendor/workbox-v5.1.3/workbox-navigation-preload.prod.js"},{revision:"745096910b53adbd707d70a5ea409ede",url:"vendor/workbox-v5.1.3/workbox-offline-ga.prod.js"},{revision:"448fb9afac0a01fc366b82aeb6c7c83e",url:"vendor/workbox-v5.1.3/workbox-precaching.prod.js"},{revision:"21dc59f711c70d86dc94dbd8fe6469a9",url:"vendor/workbox-v5.1.3/workbox-range-requests.prod.js"},{revision:"a19bfe4fab96139733546689de96a1a9",url:"vendor/workbox-v5.1.3/workbox-routing.prod.js"},{revision:"dd1f42218fc9f8e8f519ce9b70062aa3",url:"vendor/workbox-v5.1.3/workbox-strategies.prod.js"},{revision:"90460f16eeeb5a75e20ac5ef28a0f625",url:"vendor/workbox-v5.1.3/workbox-streams.prod.js"},{revision:"d3a55aad7db6bc8a6651a56f27c9ff6a",url:"vendor/workbox-v5.1.3/workbox-sw.js"},{revision:"06216d35574d9b2b228a3cfdf1830785",url:"vendor/workbox-window.js"}]||[]).map(e=>`${r}${e.url}`).concat(["https://fonts.googleapis.com/css?family=Roboto%20Mono:100,200,300,400,500,600,700,800,900&display=swap","https://fonts.gstatic.com/s/robotomono/v7/L0x5DF4xlVMF-BfR8bXMIjhLq38.woff2","https://fonts.gstatic.com/s/robotomono/v7/L0xkDF4xlVMF-BfR8bXMIjDwjmqxf78.woff2","https://fonts.gstatic.com/s/robotomono/v7/L0xkDF4xlVMF-BfR8bXMIjC4iGqxf78.woff2"])).register()}(Kc||(Kc={})),function(e){const r={undefined:!1,fieldSeparator:",",lineSeparator:"\n",quote:'"'},o=(e,r)=>{if(!r.undefined||e.length)return e},a=(e,r,o)=>{r.push(e),o.field++,o.fieldOffset=-1,o.appendField=!1},s=(e,r,o)=>{r.push(e),o.field=0,o.line++,o.lineOffset=-1,o.appendRow=!1},i=(e,i=r)=>new Promise(t=>{((e,i=r)=>{const t=Object.assign({},r,i),c={field:0,fieldOffset:0,line:0,lineOffset:0,quoted:!1,appendCell:!1,appendField:!1,appendRow:!1};return new Promise((r,i)=>{if(e.length){const n=[];let d=[],f="";for(let r=0;r<e.length;r++)c.appendCell=!0,e[r]===t.quote?r&&"\\"!==e[r-1]?(!f.length||c.quoted?c.quoted=!c.quoted:i(Error(`Invalid CSV text at offset ${c.line}:${c.lineOffset}`)),c.appendCell=!1):f=f.substr(0,f.length-1):e[r]===t.fieldSeparator?c.quoted||(c.appendCell=!1,c.appendField=!0):e[r]===t.lineSeparator&&(c.quoted||(c.appendCell=!1,c.appendField=!0,c.appendRow=!0)),c.appendCell&&(f+=e[r]),c.appendField&&(a(o(f,t),d,c),f=""),c.appendRow&&(s(d,n,c),d=[]),c.lineOffset++,c.fieldOffset++;d.length&&(a(o(f,t),d,c),s(d,n,c)),r(n)}else i(Error("Empty CSV text"))})})(e,i).then(e=>{const r=e[0].filter(e=>"string"==typeof e);t(e.filter((e,r)=>r>0).map(e=>{const o={};return r.forEach((r,a)=>{o[r]=e[a]}),o}))})});class t{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={values:[]};return Object.keys(e).forEach(o=>{if(o.match(/State/))r.state=e[o];else if(o.match(/Country/))r.country=e[o].replace(/\*/,"");else if(o.match(/Lat/))r.lat=parseFloat(e[o]);else if(o.match(/Long/))r.lon=parseFloat(e[o]);else{const a=parseInt(e[o],10),s=new Date(o),i=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate());r.values.push({timestamp:i,value:a})}}),r.values.sort((e,r)=>e.timestamp-r.timestamp),Object.freeze(r)}}class c{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={};return Object.keys(e).forEach(o=>{o.match(/State/)?r.state=e[o]:o.match(/Country/)?r.country=e[o].replace(/\*/,""):o.match(/Lat/)?r.lat=parseFloat(e[o]):o.match(/Long/)?r.lon=parseFloat(e[o]):o.match(/Population/)?r.population=parseInt(e[o]):o.match(/UID/)?r.uid=parseInt(e[o]):o.match(/iso2/)?r.iso2=e[o]:o.match(/iso3/)?r.iso3=e[o]:o.match(/code3/)?r.code3=parseInt(e[o]):o.match(/FIPS/)?r.fips=parseInt(e[o]):o.match(/Admin2/)&&(r.admin2=e[o])}),Object.freeze(r)}}let n;!function(e){e.CONFIRMED="confirmed",e.DEATHS="deaths",e.RECOVERED="recovered",e.LOOKUP="lookup"}(n||(n={}));e.ModelCollector=class{constructor(e=new t,r=new c){this._modelMapper=e,this._lookupMapper=r}async collect(){const e=await this._fetchLookup(),r=await this._fetchModel(n.CONFIRMED),o=await this._fetchModel(n.DEATHS),a=await this._fetchModel(n.RECOVERED);return this.merge(r,o,a,e)}findSeries(e,r){const o=r.find(r=>r.timestamp===e);return o?o.value:0}async merge(e,r,o,a){return new Promise(s=>{s(e.filter(e=>"Canada"!==e.country||"Recovered"!==e.state).map(e=>{const s=a.find(r=>{let o=r.country.localeCompare(e.country);return 0===o&&(o=r.state.localeCompare(e.state)),0===o}),i=r.find(r=>r.country===e.country&&r.state===e.state),t=o.find(r=>r.country===e.country&&r.state===e.state),c=e.values.map(e=>Object.freeze({confirmed:e.value,deaths:this.findSeries(e.timestamp,i?i.values:[]),recovered:this.findSeries(e.timestamp,t?t.values:[]),timestamp:e.timestamp}));return Object.freeze({country:e.country,lat:e.lat,lon:e.lon,state:e.state,population:s&&s.population||0,values:Object.freeze(c)})}))})}async _fetchModel(e){return this._fetch(e).then(e=>i(e)).then(e=>this._modelMapper.map(e))}async _fetchLookup(){return this._fetch(n.LOOKUP).then(e=>i(e)).then(e=>this._lookupMapper.map(e))}async _fetch(e){const r=new Request(this._fetchUrl(e),{headers:this._fetchHeaders(),method:"GET"});return(await fetch(r)).text()}_fetchHeaders(){return{"Accept-Encoding":"gzip, deflate, br"}}_fetchUrl(e){const r="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/";return e===n.LOOKUP?r+"UID_ISO_FIPS_LookUp_Table.csv":`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_${e}_global.csv`}};e.ModelProcessor=class{constructor(e){this._model=[],e&&e.length&&(this._model=this.process(e))}get model(){return this._model}process(e){return e.map(e=>{const r=e.population?e.population/1e5:1,o={country:e.country,population:e.population};return e.state&&e.state.length&&(o.state=e.state),o.values=e.values.map((e,o,a)=>{const s={5:this.avrg(5,o,a),7:this.avrg(7,o,a),14:this.avrg(14,o,a),21:this.avrg(21,o,a),28:this.avrg(28,o,a)},i=this.diff(e,o,a),t={confirmed:e.confirmed,dead:e.deaths,recovered:e.recovered,active:this.active(e)};return{...t,diff:i,avrg:s,ratio:{...this.ratio(t,r),diff:this.ratio(i,r),avrg:{5:this.ratio(s[5],r),7:this.ratio(s[7],r),14:this.ratio(s[14],r),21:this.ratio(s[21],r),28:this.ratio(s[28],r)}},timestamp:e.timestamp}}),o})}diff(e,r,o){return r?{confirmed:e.confirmed-o[r-1].confirmed,dead:e.deaths-o[r-1].deaths,recovered:e.recovered-o[r-1].recovered,active:this.active(e)-this.active(o[r-1])}:{confirmed:0,dead:0,recovered:0,active:0}}avrg(e,r,o){if(r){const a={confirmed:0,dead:0,recovered:0,active:0};let s=0;for(let i=r;i>r-e&&i>0;i--){const e=this.diff(o[i],i,o);a.confirmed+=e.confirmed,a.dead+=e.dead,a.recovered+=e.recovered,a.active+=e.active,s++}return s?{confirmed:a.confirmed/s,dead:a.dead/s,recovered:a.recovered/s,active:a.active/s}:a}return{confirmed:o[r].confirmed,dead:o[r].deaths,recovered:o[r].recovered,active:this.active(o[r])}}active(e){return e.confirmed-e.deaths-e.recovered}ratio(e,r){return{confirmed:e.confirmed/r,dead:e.dead/r,recovered:e.recovered/r,active:e.active/r}}}}(Kc||(Kc={}));