var Gc;!function(e){const r=new URL(location.toString()).searchParams.get("base")||"/";new((()=>{class r{constructor(e=self,r="/",o=[]){this.service=e,this.base=r,this.cacheUrls=o,e.customServiceWorker=this}register(){if(!this.service)throw new Error("Invalid service [ServiceWorkerGlobalScope]");this.service.onsync=this.onSync.bind(this),this.service.onactivate=this.onActivate.bind(this),this.service.onfetch=this.onFetch.bind(this),this.service.oninstall=this.onInstall.bind(this),this.service.onmessage=this.onMessage.bind(this)}onInstall(e){e.waitUntil(new Promise(e=>{this.initializeCache().then(()=>{e(this.service.skipWaiting())})}))}async onActivate(e){e.waitUntil(new Promise(e=>{this.flushCache().then(()=>{e(this.service.skipWaiting())})}))}onFetch(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(caches.match(e.request).then(r=>r||this.service.fetch(e.request,{credentials:"same-origin"}).then(r=>{if(!r||200!==r.status||"basic"!==r.type)return r;const o=r.clone();return caches.open(this.cacheId("fetch")).then(r=>{r.put(e.request,o)}).catch(e=>{throw e}),r})))}onMessage(o){if(o&&o.data&&o.data.type)switch(o.data.type){case"GET_VERSION":o.ports[0].postMessage(r.version);break;case"CONTENT_CACHED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_CACHED")})});break;case"CONTENT_UPDATED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_UPDATED")})});break;case"CLIENTS_CLAIM":this.service.clients.claim();break;case"SKIP_WAITING":this.service.skipWaiting();break;case"GET_MODELS":(new e.ModelCollector).collect().then(r=>{const a=new e.ModelProcessor(r);o.ports[0].postMessage(a.model)})}else this.log("message raw",o)}async onSync(r){switch(r.tag){case"UPDATE_MODEL":const r=new e.ModelCollector,o=await r.collect(),a=new e.ModelProcessor(o).model;this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage(a)})})}}log(...e){const o=["background: #000080","border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.em"];console.log(`%c${r.id}-${r.version}`,o.join(";"),e)}cacheId(e){return`${e}-${r.version}`}initializeCache(){return new Promise((e,r)=>{caches.open(this.cacheId("install")).then(e=>e.addAll(this.cacheUrls.map(e=>`${this.base}${e}`))).then(e).catch(r)})}flushCache(){const e=[this.cacheId("install"),this.cacheId("fetch"),this.cacheId("data")];return new Promise((r,o)=>{caches.keys().then(o=>{r(Promise.all(o.map(r=>-1===e.indexOf(r)?caches.delete(r):Promise.resolve(!0))))}).catch(o)})}}return r.id="ServiceWorker",r.version="0.0.1",r})())(self,r,[{revision:"b6a28c9f8a7136fb90891872a4588195",url:"404.html"},{revision:"ad1d435755d9f771a263a5bcebf64062",url:"favicon.ico"},{revision:"92963933d27c2e84edf9fc8ca5a2a25f",url:"favicon/android-chrome-144x144.png"},{revision:"9777c9df9a62d135bc2ae9432c04fae8",url:"favicon/android-chrome-192x192.png"},{revision:"f5323f831917c69aa159343c74083e2c",url:"favicon/android-chrome-256x256.png"},{revision:"172ce1875283a79ae0af8004f47bab49",url:"favicon/android-chrome-36x36.png"},{revision:"1976671274e62e6b175574c64117ecd1",url:"favicon/android-chrome-384x384.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/android-chrome-48x48.png"},{revision:"caabaae5a194d59c48b1474e0493a8ee",url:"favicon/android-chrome-512x512.png"},{revision:"afa7d3e0dc605f0127ea4ce4e68c2316",url:"favicon/android-chrome-72x72.png"},{revision:"ed22b2edfc9f0b9470c5dbbaf0fce155",url:"favicon/android-chrome-96x96.png"},{revision:"b12dcabbcc292742d1797577b8bc804a",url:"favicon/apple-touch-icon-1024x1024.png"},{revision:"56cedd5a4fb5281dc5db81f1634f58f8",url:"favicon/apple-touch-icon-114x114.png"},{revision:"9e058ada59e59855793e327c1b310e55",url:"favicon/apple-touch-icon-120x120.png"},{revision:"d4061951f3c0e03ce9ab1442c4ab7e28",url:"favicon/apple-touch-icon-144x144.png"},{revision:"8ee59a93c0329dc1b6108e42001f3e56",url:"favicon/apple-touch-icon-152x152.png"},{revision:"3680a43ebfc9f1afa4669ae80a3969ce",url:"favicon/apple-touch-icon-167x167.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-180x180.png"},{revision:"22df1fd6fdd24903692d0c4a43f6fd87",url:"favicon/apple-touch-icon-57x57.png"},{revision:"dfba8e05bedc5eacfa3a4e0242d447bb",url:"favicon/apple-touch-icon-60x60.png"},{revision:"2df3c9216eb35360e956d48e2c29c5d4",url:"favicon/apple-touch-icon-72x72.png"},{revision:"7684e01a2d0057de2ea5570e8968de38",url:"favicon/apple-touch-icon-76x76.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-precomposed.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon.png"},{revision:"5986e58932aa21b0995e447d9e36e4d0",url:"favicon/favicon-16x16.png"},{revision:"184e641ca4e317be415af5170b8cc493",url:"favicon/favicon-32x32.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/favicon-48x48.png"},{revision:"86bff67cfe290f6e1bfb24010150b371",url:"importmap.json"},{revision:"f53b5ad566441e69226a130ff7b76cd3",url:"index.html"},{revision:"4cd06362d6dbdf9c9e70e4f5f32cd5c7",url:"manifest.json"},{revision:"5e0bd1c281a62a380d7a948085bfe2d1",url:"robots.txt"},{revision:"889921c2700fa5b377303e175ffe878c",url:"script/application.js"},{revision:"ebaf22cdcdedd0f2613109189965b939",url:"script/components/layouts/default/index.js"},{revision:"c5108681d5932fc339d5888aadc1be21",url:"script/components/organisms/countries/index.js"},{revision:"34dced4a71f37b83611bc13c4ef614fd",url:"script/components/organisms/footer/index.js"},{revision:"77d4c054b01363cbd352702f75e6e18d",url:"script/components/organisms/header/index.js"},{revision:"7a7a5e78e2485dd3c024b59fc847dbb5",url:"script/components/organisms/latest/index.js"},{revision:"4345f15bf0935d65aaeb9b42abd7ad33",url:"script/components/organisms/main/index.js"},{revision:"26005f7e296a71be520121aba9516bc2",url:"script/components/organisms/nav/index.js"},{revision:"e6e6f4bb5e1f3f699e6f1cc6e96f8c83",url:"script/components/organisms/plot/index.js"},{revision:"8e45860af829815c141d6434ff8fe0fe",url:"script/components/organisms/series/index.js"},{revision:"6f8e4200118365d2be35fdf53d1559aa",url:"script/components/organisms/spinner/index.js"},{revision:"aa1c963ef38db50250ede1cf27a50224",url:"script/components/organisms/top/index.js"},{revision:"740ae5173e3e4ced28682249eef93a55",url:"script/components/pages/about/index.js"},{revision:"4f5aeb0a2fb076d4fe68e18b9af611e3",url:"script/components/pages/detail/index.js"},{revision:"d9ebe57fa12e42825e30a167f76a3e51",url:"script/components/pages/font/index.js"},{revision:"ae759507a92ba3142eab47492f1c4b22",url:"script/components/pages/home/index.js"},{revision:"8d65363be2dc9eb53cfac628329efa51",url:"script/fonts.js"},{revision:"fd8bfd989d920cfc5911eedcc14e49d2",url:"script/index.js"},{revision:"b1297612880d0ff36ea5a3245118cbaa",url:"script/loading.js"},{revision:"5fa11e2c4654fccbfad4e12f2472bd20",url:"script/model/index.js"},{revision:"7344047acf1bfdeef4f8e55f448b54e5",url:"script/model/sorter/index.js"},{revision:"12b1b5643c9c7681ed11dfdc74a88d81",url:"script/states/models/index.js"},{revision:"918f7d3b7f396ea6495bfd054ed26cb9",url:"script/states/version/index.js"},{revision:"6ae0de9b7153596209cd33dc5c6ba58b",url:"script/states/world/index.js"},{revision:"584873d2eadd3db0771b10e430602a27",url:"styles.css"},{revision:"92e5219468040aaef29f30d836265fdf",url:"vendor/@fortawesome/fontawesome-svg-core.js"},{revision:"2fb09fb070c905172c4e18f41ff30a9d",url:"vendor/@fortawesome/free-brands-svg-icons.js"},{revision:"9243833119d01de9af673687a103e84b",url:"vendor/@fortawesome/free-regular-svg-icons.js"},{revision:"e0035dd1319458c64f8ce9ab9440d45d",url:"vendor/@fortawesome/free-solid-svg-icons.js"},{revision:"ff0a5c0fb6f67002cd19142b673b28ae",url:"vendor/@fortawesome/react-fontawesome.js"},{revision:"d297254e14c855082237d92ae7708aa9",url:"vendor/clsx.js"},{revision:"63f1f6ca5568b6b5710c63f74fdf4281",url:"vendor/d3-array.js"},{revision:"c449d8151e75f57f57ea3f43ac0debae",url:"vendor/d3-color.js"},{revision:"2071a3ce4cc114edcf138267bfb55ff2",url:"vendor/d3-format.js"},{revision:"bbd047aac1b17bd8b8c812bf0feacb8a",url:"vendor/d3-interpolate.js"},{revision:"46951c7a05a36ba15ca6ffa37f4f9f18",url:"vendor/d3-path.js"},{revision:"3aab0d7abda8c049050873d0f847e6f7",url:"vendor/d3-scale.js"},{revision:"9c0a4d1879a78e25f9cc44842689a658",url:"vendor/d3-shape.js"},{revision:"b235e234d46f773ddd8badb9946f3ed3",url:"vendor/d3-time-format.js"},{revision:"ee4c8e1e3d461079d34564f8e8958703",url:"vendor/d3-time.js"},{revision:"1ebf8a031da50e24441d3d4582070cbd",url:"vendor/es-module-shims.js"},{revision:"1aeae482d7842e0b5f7a2794c1b5ec72",url:"vendor/idb.js"},{revision:"eb58c34b083f70fe4cc6a44f47e316f9",url:"vendor/object-assign.js"},{revision:"5f3337f689c3be0818a5d51cafc76344",url:"vendor/prop-types.js"},{revision:"80dd88491e592e200f57b1af4eb1449d",url:"vendor/react-dom.js"},{revision:"a228f10933d79cfbd88cd098c92aba6a",url:"vendor/react-is.js"},{revision:"859e6ae90999704fe295630fb4b0eb64",url:"vendor/react-router-dom.js"},{revision:"72c967adcd2657c5773868af28fdaf97",url:"vendor/react-router.js"},{revision:"32d2f17e047c7293ef9025174e6d104f",url:"vendor/react-smooth.js"},{revision:"5f06f5d8db03e04352f68b2ece495e4a",url:"vendor/react-transition-group.js"},{revision:"89dd3ef2dcd2fe58a95fae4a0ab9c74f",url:"vendor/react.js"},{revision:"0051d94758da1122ed54c78c3b7d283d",url:"vendor/recharts-scale.js"},{revision:"0904f08cd720178ac770b602fcd180d2",url:"vendor/recharts.js"},{revision:"9ddbc85e4d5f3353a0631bab31ce05cf",url:"vendor/recoil.js"},{revision:"c95ae7a14a06997c2855f729c5adf14f",url:"vendor/scheduler.js"},{revision:"7269b79137c67932fb0d5dc8f7c14a57",url:"vendor/workbox-v5.1.3/workbox-background-sync.prod.js"},{revision:"8813bda1cfbc7b922f3a9105a35eb7ee",url:"vendor/workbox-v5.1.3/workbox-broadcast-update.prod.js"},{revision:"700bac683cc2be2f02e25d2356096b33",url:"vendor/workbox-v5.1.3/workbox-cacheable-response.prod.js"},{revision:"cdb9e81b48a21237aae4ac7686769319",url:"vendor/workbox-v5.1.3/workbox-core.prod.js"},{revision:"8ef71df6f2ea2db0f3834d7cde4020bb",url:"vendor/workbox-v5.1.3/workbox-expiration.prod.js"},{revision:"d00d52e842534c7245acf011b6e3c1ab",url:"vendor/workbox-v5.1.3/workbox-navigation-preload.prod.js"},{revision:"fd7c36c5f4e37987323adca8248a6796",url:"vendor/workbox-v5.1.3/workbox-offline-ga.prod.js"},{revision:"5e3e520646d6ee47b36e859d900d0ba9",url:"vendor/workbox-v5.1.3/workbox-precaching.prod.js"},{revision:"a4036c5276d9d00f6528c5c53f07d55e",url:"vendor/workbox-v5.1.3/workbox-range-requests.prod.js"},{revision:"2d95f1b3c30a53079561b46d02b0704d",url:"vendor/workbox-v5.1.3/workbox-routing.prod.js"},{revision:"18d73216008833ded1ca0720c8117c66",url:"vendor/workbox-v5.1.3/workbox-strategies.prod.js"},{revision:"474e599cdca43230c04ec817c7aed738",url:"vendor/workbox-v5.1.3/workbox-streams.prod.js"},{revision:"0f4588866282ce76b39e026e614c5e24",url:"vendor/workbox-v5.1.3/workbox-sw.js"},{revision:"84a652f93f25d0f3cdeb4a1822daa1e2",url:"vendor/workbox-window.js"},{revision:"12fa44bf3fd05d08ac4ab579995bf12b",url:"vendor/workbox.js"}].map(e=>e.url)).register()}(Gc||(Gc={})),function(e){const r={undefined:!1,fieldSeparator:",",lineSeparator:"\n",quote:'"'},o=(e,r)=>{if(!r.undefined||e.length)return e},a=(e,r,o)=>{r.push(e),o.field++,o.fieldOffset=-1,o.appendField=!1},i=(e,r,o)=>{r.push(e),o.field=0,o.line++,o.lineOffset=-1,o.appendRow=!1},s=(e,s=r)=>new Promise(c=>{((e,s=r)=>{const c=Object.assign({},r,s),t={field:0,fieldOffset:0,line:0,lineOffset:0,quoted:!1,appendCell:!1,appendField:!1,appendRow:!1};return new Promise((r,s)=>{if(e.length){const n=[];let d=[],f="";for(let r=0;r<e.length;r++)t.appendCell=!0,e[r]===c.quote?r&&"\\"!==e[r-1]?(!f.length||t.quoted?t.quoted=!t.quoted:s(Error(`Invalid CSV text at offset ${t.line}:${t.lineOffset}`)),t.appendCell=!1):f=f.substr(0,f.length-1):e[r]===c.fieldSeparator?t.quoted||(t.appendCell=!1,t.appendField=!0):e[r]===c.lineSeparator&&(t.quoted||(t.appendCell=!1,t.appendField=!0,t.appendRow=!0)),t.appendCell&&(f+=e[r]),t.appendField&&(a(o(f,c),d,t),f=""),t.appendRow&&(i(d,n,t),d=[]),t.lineOffset++,t.fieldOffset++;d.length&&(a(o(f,c),d,t),i(d,n,t)),r(n)}else s(Error("Empty CSV text"))})})(e,s).then(e=>{const r=e[0].filter(e=>"string"==typeof e);c(e.filter((e,r)=>r>0).map(e=>{const o={};return r.forEach((r,a)=>{o[r]=e[a]}),o}))})});class c{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={values:[]};return Object.keys(e).forEach(o=>{if(o.match(/State/))r.state=e[o];else if(o.match(/Country/))r.country=e[o].replace(/\*/,"");else if(o.match(/Lat/))r.lat=parseFloat(e[o]);else if(o.match(/Long/))r.lon=parseFloat(e[o]);else{const a=parseInt(e[o],10),i=new Date(o),s=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());r.values.push({timestamp:s,value:a})}}),r.values.sort((e,r)=>e.timestamp-r.timestamp),Object.freeze(r)}}class t{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={};return Object.keys(e).forEach(o=>{o.match(/State/)?r.state=e[o]:o.match(/Country/)?r.country=e[o].replace(/\*/,""):o.match(/Lat/)?r.lat=parseFloat(e[o]):o.match(/Long/)?r.lon=parseFloat(e[o]):o.match(/Population/)?r.population=parseInt(e[o]):o.match(/UID/)?r.uid=parseInt(e[o]):o.match(/iso2/)?r.iso2=e[o]:o.match(/iso3/)?r.iso3=e[o]:o.match(/code3/)?r.code3=parseInt(e[o]):o.match(/FIPS/)?r.fips=parseInt(e[o]):o.match(/Admin2/)&&(r.admin2=e[o])}),Object.freeze(r)}}let n;!function(e){e.CONFIRMED="confirmed",e.DEATHS="deaths",e.RECOVERED="recovered",e.LOOKUP="lookup"}(n||(n={}));e.ModelCollector=class{constructor(e=new c,r=new t){this._modelMapper=e,this._lookupMapper=r}async collect(){const e=await this._fetchLookup(),r=await this._fetchModel(n.CONFIRMED),o=await this._fetchModel(n.DEATHS),a=await this._fetchModel(n.RECOVERED);return this.merge(r,o,a,e)}findSeries(e,r){const o=r.find(r=>r.timestamp===e);return o?o.value:0}async merge(e,r,o,a){return new Promise(i=>{i(e.filter(e=>"Canada"!==e.country||"Recovered"!==e.state).map(e=>{const i=a.find(r=>{let o=r.country.localeCompare(e.country);return 0===o&&(o=r.state.localeCompare(e.state)),0===o}),s=r.find(r=>r.country===e.country&&r.state===e.state),c=o.find(r=>r.country===e.country&&r.state===e.state),t=e.values.map(e=>Object.freeze({confirmed:e.value,deaths:this.findSeries(e.timestamp,s?s.values:[]),recovered:this.findSeries(e.timestamp,c?c.values:[]),timestamp:e.timestamp}));return Object.freeze({country:e.country,lat:e.lat,lon:e.lon,state:e.state,population:i&&i.population||0,values:Object.freeze(t)})}))})}async _fetchModel(e){return this._fetch(e).then(e=>s(e)).then(e=>this._modelMapper.map(e))}async _fetchLookup(){return this._fetch(n.LOOKUP).then(e=>s(e)).then(e=>this._lookupMapper.map(e))}async _fetch(e){const r=new Request(this._fetchUrl(e),{headers:this._fetchHeaders(),method:"GET"});return(await fetch(r)).text()}_fetchHeaders(){return{"Accept-Encoding":"gzip, deflate, br"}}_fetchUrl(e){const r="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/";return e===n.LOOKUP?r+"UID_ISO_FIPS_LookUp_Table.csv":`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_${e}_global.csv`}};e.ModelProcessor=class{constructor(e){this._model=[],e&&e.length&&(this._model=this.process(e))}get model(){return this._model}process(e){return e.map(e=>{const r=e.population?e.population/1e5:1,o={country:e.country,population:e.population};return e.state&&e.state.length&&(o.state=e.state),o.values=e.values.map((e,o,a)=>{const i={5:this.avrg(5,o,a),7:this.avrg(7,o,a),14:this.avrg(14,o,a),21:this.avrg(21,o,a),28:this.avrg(28,o,a)},s=this.diff(e,o,a),c={confirmed:e.confirmed,dead:e.deaths,recovered:e.recovered,active:this.active(e)};return{...c,diff:s,avrg:i,ratio:{...this.ratio(c,r),diff:this.ratio(s,r),avrg:{5:this.ratio(i[5],r),7:this.ratio(i[7],r),14:this.ratio(i[14],r),21:this.ratio(i[21],r),28:this.ratio(i[28],r)}},timestamp:e.timestamp}}),o})}diff(e,r,o){return r?{confirmed:e.confirmed-o[r-1].confirmed,dead:e.deaths-o[r-1].deaths,recovered:e.recovered-o[r-1].recovered,active:this.active(e)-this.active(o[r-1])}:{confirmed:0,dead:0,recovered:0,active:0}}avrg(e,r,o){if(r){const a={confirmed:0,dead:0,recovered:0,active:0};let i=0;for(let s=r;s>r-e&&s>0;s--){const e=this.diff(o[s],s,o);a.confirmed+=e.confirmed,a.dead+=e.dead,a.recovered+=e.recovered,a.active+=e.active,i++}return i?{confirmed:a.confirmed/i,dead:a.dead/i,recovered:a.recovered/i,active:a.active/i}:a}return{confirmed:o[r].confirmed,dead:o[r].deaths,recovered:o[r].recovered,active:this.active(o[r])}}active(e){return e.confirmed-e.deaths-e.recovered}ratio(e,r){return{confirmed:e.confirmed/r,dead:e.dead/r,recovered:e.recovered/r,active:e.active/r}}}}(Gc||(Gc={}));