var Kc;!function(e){const r=new URL(location.toString()).searchParams.get("base")||"/";class o{constructor(e=self,r="/",o=[]){this.service=e,this.base=r,this.cacheUrls=o,e.customServiceWorker=this}register(){if(!this.service)throw new Error("Invalid service [ServiceWorkerGlobalScope]");this.service.onsync=this.onSync.bind(this),this.service.onactivate=this.onActivate.bind(this),this.service.onfetch=this.onFetch.bind(this),this.service.oninstall=this.onInstall.bind(this),this.service.onmessage=this.onMessage.bind(this)}onInstall(e){e.waitUntil(new Promise(e=>{this.initializeCache().then(()=>{e(this.service.skipWaiting())})}))}async onActivate(e){e.waitUntil(new Promise(e=>{this.flushCache().then(()=>{e(this.service.skipWaiting())})}))}onFetch(e){"only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||e.respondWith(caches.match(e.request).then(r=>r||this.service.fetch(e.request,{credentials:"same-origin"}).then(r=>{if(!r||200!==r.status||"basic"!==r.type)return r;const o=r.clone();return caches.open(this.cacheId("fetch")).then(r=>{r.put(e.request,o)}).catch(e=>{throw e}),r})))}onMessage(r){if(r&&r.data&&r.data.type)switch(r.data.type){case"GET_VERSION":r.ports[0].postMessage(o.version);break;case"CONTENT_CACHED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_CACHED")})});break;case"CONTENT_UPDATED":this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage("CONTENT_UPDATED")})});break;case"CLIENTS_CLAIM":this.service.clients.claim();break;case"SKIP_WAITING":this.service.skipWaiting();break;case"GET_MODELS":(new e.ModelCollector).collect().then(o=>{const a=new e.ModelProcessor(o);r.ports[0].postMessage(a.model)})}else this.log("message raw",r)}async onSync(r){switch(r.tag){case"UPDATE_MODEL":const r=new e.ModelCollector,o=await r.collect(),a=new e.ModelProcessor(o).model;this.service.clients.matchAll().then(e=>{e.forEach(e=>{e.postMessage(a)})})}}log(...e){const r=["background: #000080","border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.em"];console.log(`%c${o.id}-${o.version}`,r.join(";"),e)}cacheId(e){return`${e}-${o.version}`}initializeCache(){return new Promise((e,r)=>{caches.open(this.cacheId("install")).then(e=>e.addAll(this.cacheUrls.map(e=>`${this.base}${e}`))).then(e).catch(r)})}flushCache(){const e=[this.cacheId("install"),this.cacheId("fetch"),this.cacheId("data")];return new Promise((r,o)=>{caches.keys().then(o=>{r(Promise.all(o.map(r=>-1===e.indexOf(r)?caches.delete(r):Promise.resolve(!0))))}).catch(o)})}}o.id="ServiceWorker",o.version="0.0.1";new o(self,r,([{revision:"b6a28c9f8a7136fb90891872a4588195",url:"404.html"},{revision:"ad1d435755d9f771a263a5bcebf64062",url:"favicon.ico"},{revision:"92963933d27c2e84edf9fc8ca5a2a25f",url:"favicon/android-chrome-144x144.png"},{revision:"9777c9df9a62d135bc2ae9432c04fae8",url:"favicon/android-chrome-192x192.png"},{revision:"f5323f831917c69aa159343c74083e2c",url:"favicon/android-chrome-256x256.png"},{revision:"172ce1875283a79ae0af8004f47bab49",url:"favicon/android-chrome-36x36.png"},{revision:"1976671274e62e6b175574c64117ecd1",url:"favicon/android-chrome-384x384.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/android-chrome-48x48.png"},{revision:"caabaae5a194d59c48b1474e0493a8ee",url:"favicon/android-chrome-512x512.png"},{revision:"afa7d3e0dc605f0127ea4ce4e68c2316",url:"favicon/android-chrome-72x72.png"},{revision:"ed22b2edfc9f0b9470c5dbbaf0fce155",url:"favicon/android-chrome-96x96.png"},{revision:"b12dcabbcc292742d1797577b8bc804a",url:"favicon/apple-touch-icon-1024x1024.png"},{revision:"56cedd5a4fb5281dc5db81f1634f58f8",url:"favicon/apple-touch-icon-114x114.png"},{revision:"9e058ada59e59855793e327c1b310e55",url:"favicon/apple-touch-icon-120x120.png"},{revision:"d4061951f3c0e03ce9ab1442c4ab7e28",url:"favicon/apple-touch-icon-144x144.png"},{revision:"8ee59a93c0329dc1b6108e42001f3e56",url:"favicon/apple-touch-icon-152x152.png"},{revision:"3680a43ebfc9f1afa4669ae80a3969ce",url:"favicon/apple-touch-icon-167x167.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-180x180.png"},{revision:"22df1fd6fdd24903692d0c4a43f6fd87",url:"favicon/apple-touch-icon-57x57.png"},{revision:"dfba8e05bedc5eacfa3a4e0242d447bb",url:"favicon/apple-touch-icon-60x60.png"},{revision:"2df3c9216eb35360e956d48e2c29c5d4",url:"favicon/apple-touch-icon-72x72.png"},{revision:"7684e01a2d0057de2ea5570e8968de38",url:"favicon/apple-touch-icon-76x76.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon-precomposed.png"},{revision:"7694a314a778dd470d2be4658f8cc879",url:"favicon/apple-touch-icon.png"},{revision:"5986e58932aa21b0995e447d9e36e4d0",url:"favicon/favicon-16x16.png"},{revision:"184e641ca4e317be415af5170b8cc493",url:"favicon/favicon-32x32.png"},{revision:"6eeed5a9fe79b5ca2623e6871a9278f5",url:"favicon/favicon-48x48.png"},{revision:"86bff67cfe290f6e1bfb24010150b371",url:"importmap.json"},{revision:"d1949262e010e9ab423b419a8a9c435a",url:"index.html"},{revision:"4cd06362d6dbdf9c9e70e4f5f32cd5c7",url:"manifest.json"},{revision:"5e0bd1c281a62a380d7a948085bfe2d1",url:"robots.txt"},{revision:"6ecf04e5c3d8346a00480b42caba60a0",url:"script/application.js"},{revision:"072c3195aa25e40a992815fd8ba74eb5",url:"script/components/layouts/default/index.js"},{revision:"43ff90ff6873805daab6b486c0d6d330",url:"script/components/organisms/countries/index.js"},{revision:"34dced4a71f37b83611bc13c4ef614fd",url:"script/components/organisms/footer/index.js"},{revision:"77d4c054b01363cbd352702f75e6e18d",url:"script/components/organisms/header/index.js"},{revision:"38a7ded084b9f25888c9b5047d25580a",url:"script/components/organisms/latest/index.js"},{revision:"c1a1db413f56eeaf4ab2399f9c7146c7",url:"script/components/organisms/main/index.js"},{revision:"26005f7e296a71be520121aba9516bc2",url:"script/components/organisms/nav/index.js"},{revision:"4a7a51d8845e15d59212114db8604469",url:"script/components/organisms/plot/index.js"},{revision:"388ccf7288eb7444d6ebf8f67964495d",url:"script/components/organisms/series/index.js"},{revision:"701d50cc5e2c007730080c603d6ec569",url:"script/components/organisms/spinner/index.js"},{revision:"fb64da79a1cbaea7d133075c1686ff90",url:"script/components/pages/about/index.js"},{revision:"6235024559b46861360947957cdae8e9",url:"script/components/pages/detail/index.js"},{revision:"0b149ff335c518bb9eb6f880c800aac9",url:"script/components/pages/font/index.js"},{revision:"34bef2ff2cf1ce595d6fbb7428f77e9c",url:"script/components/pages/home/index.js"},{revision:"80c9ecb90613b2445c686dd38fcdf427",url:"script/fonts.js"},{revision:"b9cdffef3b43fa127ec3ff13ede0c709",url:"script/index.js"},{revision:"e36552997a0e550b3b9c0764dbdebb7b",url:"script/loading.js"},{revision:"b314a232116365d1befc220acddaeede",url:"script/model/index.js"},{revision:"06092ff73b52e5453426a730cbfe50fb",url:"script/model/sorter/index.js"},{revision:"203408ad33c112bc123421c08df644d7",url:"script/states/avrg/index.js"},{revision:"ea4a35304b45b68f3bd41a80c8f212de",url:"script/states/models/index.js"},{revision:"cf4394c264c73e43084a28141d41359a",url:"script/states/type/index.js"},{revision:"5eea8c253c85a26293c518879b5c1eec",url:"script/states/version/index.js"},{revision:"74e41f3c90702ce6762d631f473a10b7",url:"script/states/world/index.js"},{revision:"1c2da25c280ff55f60cb7085354370f6",url:"styles.css"},{revision:"e0812a0df2ae22460dd268f5abc4a7d3",url:"vendor/@fortawesome/fontawesome-svg-core.js"},{revision:"b4724db803e4630629154b0f8cf5b5eb",url:"vendor/@fortawesome/free-brands-svg-icons.js"},{revision:"9243833119d01de9af673687a103e84b",url:"vendor/@fortawesome/free-regular-svg-icons.js"},{revision:"3ae6329255f8f1852dbde17a9deb4a9d",url:"vendor/@fortawesome/free-solid-svg-icons.js"},{revision:"32d6f94a22d97dc7f2bd282bd2e63626",url:"vendor/@fortawesome/react-fontawesome.js"},{revision:"d297254e14c855082237d92ae7708aa9",url:"vendor/clsx.js"},{revision:"63f1f6ca5568b6b5710c63f74fdf4281",url:"vendor/d3-array.js"},{revision:"c35488bcf6bf78c06ce217cae1c2a46f",url:"vendor/d3-color.js"},{revision:"2071a3ce4cc114edcf138267bfb55ff2",url:"vendor/d3-format.js"},{revision:"8e268a7a11c54f1c242d2435b72b5b9e",url:"vendor/d3-interpolate.js"},{revision:"46951c7a05a36ba15ca6ffa37f4f9f18",url:"vendor/d3-path.js"},{revision:"d9b5d9fe0a8deb555f2b60b6abee64d1",url:"vendor/d3-scale.js"},{revision:"7fd8832f45120f74e9eed3e0b595bda6",url:"vendor/d3-shape.js"},{revision:"22e93e29aaf60e86798db2dcace24a29",url:"vendor/d3-time-format.js"},{revision:"ab27a2140e31119222bc514fa79fff97",url:"vendor/d3-time.js"},{revision:"1ebf8a031da50e24441d3d4582070cbd",url:"vendor/es-module-shims.js"},{revision:"659499b8e5efe81c3f98b3bf7cce4fe7",url:"vendor/idb.js"},{revision:"4a255c54496d3adf7c1a56d77beff06c",url:"vendor/object-assign.js"},{revision:"6b15155412b81e5695f07afa1252a887",url:"vendor/prop-types.js"},{revision:"6afcc3133a94bd1bd934f7a23a694637",url:"vendor/react-dom.js"},{revision:"a295d2f6dcfe7bf939ca07341637464d",url:"vendor/react-is.js"},{revision:"e3289ddebe343b9d244b8d2db1b2c8a6",url:"vendor/react-router-dom.js"},{revision:"e7f2993b987de7b32b5d578cb13923d6",url:"vendor/react-router.js"},{revision:"183c4371083526956179781a14475fea",url:"vendor/react-smooth.js"},{revision:"33d61e873f8d4f3c2809f977b8baef1e",url:"vendor/react-transition-group.js"},{revision:"00b0995faf40bf1889bffbe3e5ac2f57",url:"vendor/react.js"},{revision:"ae4ac4e7d934b3eeb45682f6c890d4f8",url:"vendor/recharts-scale.js"},{revision:"7090ce237adcf5a3f2b0911303106094",url:"vendor/recharts.js"},{revision:"2cce5bf8b86ea63e7c59be240893cca8",url:"vendor/recoil.js"},{revision:"ec42b514c57a94e2338dff696f757f9a",url:"vendor/scheduler.js"},{revision:"67b95817be7582361194453662d5eed4",url:"vendor/workbox-v5.1.3/workbox-background-sync.prod.js"},{revision:"f58ca3825feff012d55bd5acc7b821fb",url:"vendor/workbox-v5.1.3/workbox-broadcast-update.prod.js"},{revision:"5ff7fe0b62d8deff9ce9a25fb7fb3b78",url:"vendor/workbox-v5.1.3/workbox-cacheable-response.prod.js"},{revision:"bb0c4dea83b283b05f93ea589126b228",url:"vendor/workbox-v5.1.3/workbox-core.prod.js"},{revision:"345d019a39a14eb5fb61ebe7fe16de49",url:"vendor/workbox-v5.1.3/workbox-expiration.prod.js"},{revision:"35ccb2cf48c7456c620081d4d0a4b1fc",url:"vendor/workbox-v5.1.3/workbox-navigation-preload.prod.js"},{revision:"d7818cb31c09e6f5995b1db306fbac62",url:"vendor/workbox-v5.1.3/workbox-offline-ga.prod.js"},{revision:"3a3cd197d46d8ae7bcee3d1f3b1614a1",url:"vendor/workbox-v5.1.3/workbox-precaching.prod.js"},{revision:"0e105ed95492eb619dd128034c1c76c5",url:"vendor/workbox-v5.1.3/workbox-range-requests.prod.js"},{revision:"839ef16f9e42821f5bf7719f1b4b0371",url:"vendor/workbox-v5.1.3/workbox-routing.prod.js"},{revision:"7ebc93c25663c3568a4394ffcbc2b8b6",url:"vendor/workbox-v5.1.3/workbox-strategies.prod.js"},{revision:"078611ab4df6b4ed4d2f6e8b01240b33",url:"vendor/workbox-v5.1.3/workbox-streams.prod.js"},{revision:"ab0b32ee94631bc697b06dd53fb8ffe2",url:"vendor/workbox-v5.1.3/workbox-sw.js"},{revision:"527a1dbd69d429fa1751cbba1aaa529a",url:"vendor/workbox-window.js"}]||[]).map(e=>e.url)).register()}(Kc||(Kc={})),function(e){const r={undefined:!1,fieldSeparator:",",lineSeparator:"\n",quote:'"'},o=(e,r)=>{if(!r.undefined||e.length)return e},a=(e,r,o)=>{r.push(e),o.field++,o.fieldOffset=-1,o.appendField=!1},i=(e,r,o)=>{r.push(e),o.field=0,o.line++,o.lineOffset=-1,o.appendRow=!1},s=(e,s=r)=>new Promise(c=>{((e,s=r)=>{const c=Object.assign({},r,s),t={field:0,fieldOffset:0,line:0,lineOffset:0,quoted:!1,appendCell:!1,appendField:!1,appendRow:!1};return new Promise((r,s)=>{if(e.length){const n=[];let d=[],f="";for(let r=0;r<e.length;r++)t.appendCell=!0,e[r]===c.quote?r&&"\\"!==e[r-1]?(!f.length||t.quoted?t.quoted=!t.quoted:s(Error(`Invalid CSV text at offset ${t.line}:${t.lineOffset}`)),t.appendCell=!1):f=f.substr(0,f.length-1):e[r]===c.fieldSeparator?t.quoted||(t.appendCell=!1,t.appendField=!0):e[r]===c.lineSeparator&&(t.quoted||(t.appendCell=!1,t.appendField=!0,t.appendRow=!0)),t.appendCell&&(f+=e[r]),t.appendField&&(a(o(f,c),d,t),f=""),t.appendRow&&(i(d,n,t),d=[]),t.lineOffset++,t.fieldOffset++;d.length&&(a(o(f,c),d,t),i(d,n,t)),r(n)}else s(Error("Empty CSV text"))})})(e,s).then(e=>{const r=e[0].filter(e=>"string"==typeof e);c(e.filter((e,r)=>r>0).map(e=>{const o={};return r.forEach((r,a)=>{o[r]=e[a]}),o}))})});class c{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={values:[]};return Object.keys(e).forEach(o=>{if(o.match(/State/))r.state=e[o];else if(o.match(/Country/))r.country=e[o].replace(/\*/,"");else if(o.match(/Lat/))r.lat=parseFloat(e[o]);else if(o.match(/Long/))r.lon=parseFloat(e[o]);else{const a=parseInt(e[o],10),i=new Date(o),s=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());r.values.push({timestamp:s,value:a})}}),r.values.sort((e,r)=>e.timestamp-r.timestamp),Object.freeze(r)}}class t{map(e){return e.map(e=>this._map(e)).sort((e,r)=>{const o=e.country.localeCompare(r.country);return 0===o?e.state.localeCompare(r.state):o})}_map(e){const r={};return Object.keys(e).forEach(o=>{o.match(/State/)?r.state=e[o]:o.match(/Country/)?r.country=e[o].replace(/\*/,""):o.match(/Lat/)?r.lat=parseFloat(e[o]):o.match(/Long/)?r.lon=parseFloat(e[o]):o.match(/Population/)?r.population=parseInt(e[o]):o.match(/UID/)?r.uid=parseInt(e[o]):o.match(/iso2/)?r.iso2=e[o]:o.match(/iso3/)?r.iso3=e[o]:o.match(/code3/)?r.code3=parseInt(e[o]):o.match(/FIPS/)?r.fips=parseInt(e[o]):o.match(/Admin2/)&&(r.admin2=e[o])}),Object.freeze(r)}}let n;!function(e){e.CONFIRMED="confirmed",e.DEATHS="deaths",e.RECOVERED="recovered",e.LOOKUP="lookup"}(n||(n={}));e.ModelCollector=class{constructor(e=new c,r=new t){this._modelMapper=e,this._lookupMapper=r}async collect(){const e=await this._fetchLookup(),r=await this._fetchModel(n.CONFIRMED),o=await this._fetchModel(n.DEATHS),a=await this._fetchModel(n.RECOVERED);return this.merge(r,o,a,e)}findSeries(e,r){const o=r.find(r=>r.timestamp===e);return o?o.value:0}async merge(e,r,o,a){return new Promise(i=>{i(e.filter(e=>"Canada"!==e.country||"Recovered"!==e.state).map(e=>{const i=a.find(r=>{let o=r.country.localeCompare(e.country);return 0===o&&(o=r.state.localeCompare(e.state)),0===o}),s=r.find(r=>r.country===e.country&&r.state===e.state),c=o.find(r=>r.country===e.country&&r.state===e.state),t=e.values.map(e=>Object.freeze({confirmed:e.value,deaths:this.findSeries(e.timestamp,s?s.values:[]),recovered:this.findSeries(e.timestamp,c?c.values:[]),timestamp:e.timestamp}));return Object.freeze({country:e.country,lat:e.lat,lon:e.lon,state:e.state,population:i&&i.population||0,values:Object.freeze(t)})}))})}async _fetchModel(e){return this._fetch(e).then(e=>s(e)).then(e=>this._modelMapper.map(e))}async _fetchLookup(){return this._fetch(n.LOOKUP).then(e=>s(e)).then(e=>this._lookupMapper.map(e))}async _fetch(e){const r=new Request(this._fetchUrl(e),{headers:this._fetchHeaders(),method:"GET"});return(await fetch(r)).text()}_fetchHeaders(){return{"Accept-Encoding":"gzip, deflate, br"}}_fetchUrl(e){const r="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/";return e===n.LOOKUP?r+"UID_ISO_FIPS_LookUp_Table.csv":`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_${e}_global.csv`}};e.ModelProcessor=class{constructor(e){this._model=[],e&&e.length&&(this._model=this.process(e))}get model(){return this._model}process(e){return e.map(e=>{const r=e.population?e.population/1e5:1,o={country:e.country,population:e.population};return e.state&&e.state.length&&(o.state=e.state),o.values=e.values.map((e,o,a)=>{const i={5:this.avrg(5,o,a),7:this.avrg(7,o,a),14:this.avrg(14,o,a),21:this.avrg(21,o,a),28:this.avrg(28,o,a)},s=this.diff(e,o,a),c={confirmed:e.confirmed,dead:e.deaths,recovered:e.recovered,active:this.active(e)};return{...c,diff:s,avrg:i,ratio:{...this.ratio(c,r),diff:this.ratio(s,r),avrg:{5:this.ratio(i[5],r),7:this.ratio(i[7],r),14:this.ratio(i[14],r),21:this.ratio(i[21],r),28:this.ratio(i[28],r)}},timestamp:e.timestamp}}),o})}diff(e,r,o){return r?{confirmed:e.confirmed-o[r-1].confirmed,dead:e.deaths-o[r-1].deaths,recovered:e.recovered-o[r-1].recovered,active:this.active(e)-this.active(o[r-1])}:{confirmed:0,dead:0,recovered:0,active:0}}avrg(e,r,o){if(r){const a={confirmed:0,dead:0,recovered:0,active:0};let i=0;for(let s=r;s>r-e&&s>0;s--){const e=this.diff(o[s],s,o);a.confirmed+=e.confirmed,a.dead+=e.dead,a.recovered+=e.recovered,a.active+=e.active,i++}return i?{confirmed:a.confirmed/i,dead:a.dead/i,recovered:a.recovered/i,active:a.active/i}:a}return{confirmed:o[r].confirmed,dead:o[r].deaths,recovered:o[r].recovered,active:this.active(o[r])}}active(e){return e.confirmed-e.deaths-e.recovered}ratio(e,r){return{confirmed:e.confirmed/r,dead:e.dead/r,recovered:e.recovered/r,active:e.active/r}}}}(Kc||(Kc={}));