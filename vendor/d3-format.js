function tr(t,r){if((i=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function rr(t){return(t=tr(Math.abs(t)))?t[1]:NaN}var ir,nr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function er(t){if(!(r=nr.exec(t)))throw new Error("invalid format: "+t);var r;return new or({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function or(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function ar(t,r){var i=tr(t,r);if(!i)return t+"";var n=i[0],e=i[1];return e<0?"0."+new Array(-e).join("0")+n:n.length>e+1?n.slice(0,e+1)+"."+n.slice(e+1):n+new Array(e-n.length+2).join("0")}er.prototype=or.prototype,or.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var sr={"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return ar(100*t,r)},r:ar,s:function(t,r){var i=tr(t,r);if(!i)return t+"";var n=i[0],e=i[1],o=e-(ir=3*Math.max(-8,Math.min(8,Math.floor(e/3))))+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+tr(t,Math.max(0,r+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function xt(t){return t}var cr,ur,fr,lr=Array.prototype.map,hr=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function mr(t){var r,i,n=void 0===t.grouping||void 0===t.thousands?xt:(r=lr.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var e=t.length,o=[],a=0,s=r[0],c=0;e>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),o.push(t.substring(e-=s,e+s)),!((c+=s+1)>n));)s=r[a=(a+1)%r.length];return o.reverse().join(i)}),e=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?xt:function(t){return function(r){return r.replace(/[0-9]/g,(function(r){return t[+r]}))}}(lr.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function l(t){var r=(t=er(t)).fill,i=t.align,l=t.sign,h=t.symbol,m=t.zero,d=t.width,p=t.comma,g=t.precision,v=t.trim,M=t.type;"n"===M?(p=!0,M="g"):sr[M]||(void 0===g&&(g=12),v=!0,M="g"),(m||"0"===r&&"="===i)&&(m=!0,r="0",i="=");var x="$"===h?e:"#"===h&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",y="$"===h?o:/[%p]/.test(M)?c:"",b=sr[M],w=/[defgprs%]/.test(M);function S(t){var e,o,c,h=x,S=y;if("c"===M)S=b(t)+S,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?f:b(Math.abs(t),g),v&&(t=function(t){t:for(var r,i=t.length,n=1,e=-1;n<i;++n)switch(t[n]){case".":e=r=n;break;case"0":0===e&&(e=n),r=n;break;default:if(!+t[n])break t;e>0&&(e=0)}return e>0?t.slice(0,e)+t.slice(r+1):t}(t)),k&&0==+t&&"+"!==l&&(k=!1),h=(k?"("===l?l:u:"-"===l||"("===l?"":l)+h,S=("s"===M?hr[8+ir/3]:"")+S+(k&&"("===l?")":""),w)for(e=-1,o=t.length;++e<o;)if(48>(c=t.charCodeAt(e))||c>57){S=(46===c?a+t.slice(e+1):t.slice(e))+S,t=t.slice(0,e);break}}p&&!m&&(t=n(t,1/0));var z=h.length+t.length+S.length,P=z<d?new Array(d-z+1).join(r):"";switch(p&&m&&(t=n(P+t,P.length?d-S.length:1/0),P=""),i){case"<":t=h+t+S+P;break;case"=":t=h+P+t+S;break;case"^":t=P.slice(0,z=P.length>>1)+h+t+S+P.slice(z);break;default:t=P+h+t+S}return s(t)}return g=void 0===g?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return t+""},S}return{format:l,formatPrefix:function(t,r){var i=l(((t=er(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(rr(r)/3))),e=Math.pow(10,-n),o=hr[8+n/3];return function(t){return i(e*t)+o}}}}function dr(t){return cr=mr(t),ur=cr.format,fr=cr.formatPrefix,cr}function pr(t){return Math.max(0,-rr(Math.abs(t)))}function gr(t,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rr(r)/3)))-rr(Math.abs(t)))}function vr(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,rr(r)-rr(t))+1}dr({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Mr=Object.freeze({__proto__:null,formatDefaultLocale:dr,get format(){return ur},get formatPrefix(){return fr},formatLocale:mr,formatSpecifier:er,FormatSpecifier:or,precisionFixed:pr,precisionPrefix:gr,precisionRound:vr});export default Mr;export{Mr as d3Format,ur as format,dr as formatDefaultLocale,mr as formatLocale,fr as formatPrefix,er as formatSpecifier,pr as precisionFixed,gr as precisionPrefix,vr as precisionRound};