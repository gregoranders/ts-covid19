import e,{memo as o,useState as v}from"react";import{Link as C}from"react-router-dom";import i from"loading";import{ModelArrayPropTypes as D,nameFormatter as _,numberFormatter as S,urlFormatter as F,timeFormatter as I}from"model";import R,{Sort as A}from"model/sorter";const T=new R;export const Countries=({models:t})=>{const[l,r]=v(A.CONFIRMED_DESC);T.by=l;const a=e=>{r(l===e?l%2==0?e-1:e+1:e)};if(!t.length)return e.createElement(i,null);T.idx=t[0].values.length-1;const n=t.map(e=>({population:e.population,confirmed:e.values[T.idx].confirmed,dead:e.values[T.idx].dead,recovered:e.values[T.idx].recovered,active:e.values[T.idx].active,diff:{confirmed:e.values[T.idx].diff.confirmed,dead:e.values[T.idx].diff.dead,recovered:e.values[T.idx].diff.recovered,active:e.values[T.idx].diff.active},ratio:{confirmed:e.values[T.idx].ratio.confirmed,dead:e.values[T.idx].ratio.dead,recovered:e.values[T.idx].ratio.recovered,active:e.values[T.idx].ratio.active}})).reduce((e,t)=>({population:e.population+t.population,confirmed:e.confirmed+t.confirmed,dead:e.dead+t.dead,recovered:e.recovered+t.recovered,active:e.active+t.active,diff:{confirmed:e.diff.confirmed+t.diff.confirmed,dead:e.diff.dead+t.diff.dead,recovered:e.diff.recovered+t.diff.recovered,active:e.diff.active+t.diff.active},ratio:{confirmed:e.ratio.confirmed+t.ratio.confirmed,dead:e.ratio.dead+t.ratio.dead,recovered:e.ratio.recovered+t.ratio.recovered,active:e.ratio.active+t.ratio.active}})),c=(t[0].values[T.idx].timestamp-t[0].values[0].timestamp)/864e5;return e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,I(t[0].values[T.idx].timestamp)),e.createElement("th",null),e.createElement("th",{colSpan:3},"Confirmed"),e.createElement("th",{colSpan:3},"Dead"),e.createElement("th",{colSpan:3},"Recovered"),e.createElement("th",{colSpan:3},"Active")),e.createElement("tr",null,e.createElement("th",null),e.createElement("th",{onClick:()=>a(A.NAME_ASC)},"Country/Region"),e.createElement("th",{onClick:()=>a(A.POPULATION_DESC)},"Population"),e.createElement("th",{onClick:()=>a(A.CONFIRMED_DESC)},"Total"),e.createElement("th",{onClick:()=>a(A.CONFIRMED_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(A.CONFIRMED_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(A.DEAD_DESC)},"Total"),e.createElement("th",{onClick:()=>a(A.DEAD_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(A.DEAD_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(A.RECOVERED_DESC)},"Total"),e.createElement("th",{onClick:()=>a(A.RECOVERED_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(A.RECOVERED_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(A.ACTIVE_DESC)},"Total"),e.createElement("th",{onClick:()=>a(A.ACTIVE_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(A.ACTIVE_DIFF_DESC)},"Daily"))),e.createElement("tbody",null,[...t].sort(T.sort).slice(0).map((t,l)=>{const r=t.values[T.idx];return e.createElement("tr",{key:l},e.createElement("td",null,l+1),e.createElement("td",null,e.createElement(C,{to:F(t)},_(t))),e.createElement("td",null,S(t.population)),e.createElement("td",null,S(r.confirmed)),e.createElement("td",null,S(r.ratio.confirmed)),e.createElement("td",null,S(r.diff.confirmed)),e.createElement("td",null,S(r.dead)),e.createElement("td",null,S(r.ratio.dead)),e.createElement("td",null,S(r.diff.dead)),e.createElement("td",null,S(r.recovered)),e.createElement("td",null,S(r.ratio.recovered)),e.createElement("td",null,S(r.diff.recovered)),e.createElement("td",null,S(r.active)),e.createElement("td",null,S(r.ratio.active)),e.createElement("td",null,S(r.diff.active)))})),e.createElement("tfoot",null,e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,"Day ",S(c+1)),e.createElement("th",null,S(n.population)),e.createElement("th",null,S(n.confirmed)),e.createElement("th",null,S(n.ratio.confirmed)),e.createElement("th",null,S(n.diff.confirmed)),e.createElement("th",null,S(n.dead)),e.createElement("th",null,S(n.ratio.dead)),e.createElement("th",null,S(n.diff.dead)),e.createElement("th",null,S(n.recovered)),e.createElement("th",null,S(n.ratio.recovered)),e.createElement("th",null,S(n.diff.recovered)),e.createElement("th",null,S(n.active)),e.createElement("th",null,S(n.ratio.active)),e.createElement("th",null,S(n.diff.active)))))};Countries.displayName="Countries",Countries.propTypes={models:D};export default o(Countries);