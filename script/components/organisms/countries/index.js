import e,{memo as t,useState as s}from"react";import{Link as C}from"react-router-dom";import D from"loading";import{nameFormatter as _,numberFormatter as A,urlFormatter as S,timeFormatter as I}from"states/model";import{ModelArrayPropTypes as R}from"states/model/model";import O,{Sort as T}from"states/model/sorter";const F=new O;export const Countries=({models:t})=>{const[l,r]=s(T.CONFIRMED_DESC);F.by=l;const a=e=>{r(l===e?l%2==0?e-1:e+1:e)};if(!t.length)return e.createElement(D,null);F.idx=t[0].values.length-1;const n=t.map(e=>({population:e.population,confirmed:e.values[F.idx].confirmed,dead:e.values[F.idx].dead,recovered:e.values[F.idx].recovered,active:e.values[F.idx].active,diff:{confirmed:e.values[F.idx].diff.confirmed,dead:e.values[F.idx].diff.dead,recovered:e.values[F.idx].diff.recovered,active:e.values[F.idx].diff.active},ratio:{confirmed:e.values[F.idx].ratio.confirmed,dead:e.values[F.idx].ratio.dead,recovered:e.values[F.idx].ratio.recovered,active:e.values[F.idx].ratio.active}})).reduce((e,t)=>({population:e.population+t.population,confirmed:e.confirmed+t.confirmed,dead:e.dead+t.dead,recovered:e.recovered+t.recovered,active:e.active+t.active,diff:{confirmed:e.diff.confirmed+t.diff.confirmed,dead:e.diff.dead+t.diff.dead,recovered:e.diff.recovered+t.diff.recovered,active:e.diff.active+t.diff.active},ratio:{confirmed:e.ratio.confirmed+t.ratio.confirmed,dead:e.ratio.dead+t.ratio.dead,recovered:e.ratio.recovered+t.ratio.recovered,active:e.ratio.active+t.ratio.active}})),c=(t[0].values[F.idx].timestamp-t[0].values[0].timestamp)/864e5;return e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,I(t[0].values[F.idx].timestamp)),e.createElement("th",null),e.createElement("th",{colSpan:3},"Confirmed"),e.createElement("th",{colSpan:3},"Dead"),e.createElement("th",{colSpan:3},"Recovered"),e.createElement("th",{colSpan:3},"Active")),e.createElement("tr",null,e.createElement("th",null),e.createElement("th",{onClick:()=>a(T.NAME_ASC)},"Country/Region"),e.createElement("th",{onClick:()=>a(T.POPULATION_DESC)},"Population"),e.createElement("th",{onClick:()=>a(T.CONFIRMED_DESC)},"Total"),e.createElement("th",{onClick:()=>a(T.CONFIRMED_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(T.CONFIRMED_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(T.DEAD_DESC)},"Total"),e.createElement("th",{onClick:()=>a(T.DEAD_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(T.DEAD_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(T.RECOVERED_DESC)},"Total"),e.createElement("th",{onClick:()=>a(T.RECOVERED_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(T.RECOVERED_DIFF_DESC)},"Daily"),e.createElement("th",{onClick:()=>a(T.ACTIVE_DESC)},"Total"),e.createElement("th",{onClick:()=>a(T.ACTIVE_RATIO_DESC)},"/100k"),e.createElement("th",{onClick:()=>a(T.ACTIVE_DIFF_DESC)},"Daily"))),e.createElement("tbody",null,[...t].sort(F.sort).slice(0).map((t,l)=>{const r=t.values[F.idx];return e.createElement("tr",{key:l},e.createElement("td",null,l+1),e.createElement("td",null,e.createElement(C,{to:S(t)},_(t))),e.createElement("td",null,A(t.population)),e.createElement("td",null,A(r.confirmed)),e.createElement("td",null,A(r.ratio.confirmed)),e.createElement("td",null,A(r.diff.confirmed)),e.createElement("td",null,A(r.dead)),e.createElement("td",null,A(r.ratio.dead)),e.createElement("td",null,A(r.diff.dead)),e.createElement("td",null,A(r.recovered)),e.createElement("td",null,A(r.ratio.recovered)),e.createElement("td",null,A(r.diff.recovered)),e.createElement("td",null,A(r.active)),e.createElement("td",null,A(r.ratio.active)),e.createElement("td",null,A(r.diff.active)))})),e.createElement("tfoot",null,e.createElement("tr",null,e.createElement("th",null),e.createElement("th",null,"Day ",A(c+1)),e.createElement("th",null,A(n.population)),e.createElement("th",null,A(n.confirmed)),e.createElement("th",null,A(n.ratio.confirmed)),e.createElement("th",null,A(n.diff.confirmed)),e.createElement("th",null,A(n.dead)),e.createElement("th",null,A(n.ratio.dead)),e.createElement("th",null,A(n.diff.dead)),e.createElement("th",null,A(n.recovered)),e.createElement("th",null,A(n.ratio.recovered)),e.createElement("th",null,A(n.diff.recovered)),e.createElement("th",null,A(n.active)),e.createElement("th",null,A(n.ratio.active)),e.createElement("th",null,A(n.diff.active)))))};Countries.displayName="Countries",Countries.propTypes={models:R};export default t(Countries);