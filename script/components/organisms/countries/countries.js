import React from 'react';
import PropTypes from 'prop-types';
import clsx from 'clsx';
import { createStyles, lighten, makeStyles, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow, TableSortLabel, Toolbar, Typography, Checkbox, IconButton, Tooltip, } from '@material-ui/core';
import { ModelProcessorPropTypes } from 'model';
import { Delete as DeleteIcon, FilterList as FilterListIcon } from '@material-ui/icons';
const useStyles = makeStyles((theme) => createStyles({
    root: {
        width: '100%',
    },
    paper: {
        width: '100%',
        marginBottom: theme.spacing(2),
    },
    table: {
        minWidth: 750,
    },
    visuallyHidden: {
        border: 0,
        clip: 'rect(0 0 0 0)',
        height: 1,
        margin: -1,
        overflow: 'hidden',
        padding: 0,
        position: 'absolute',
        top: 20,
        width: 1,
    },
}));
function descendingComparator(a, b, orderBy) {
    if (b[orderBy] < a[orderBy]) {
        return -1;
    }
    if (b[orderBy] > a[orderBy]) {
        return 1;
    }
    return 0;
}
function getComparator(order, orderBy) {
    return order === 'desc'
        ? (a, b) => descendingComparator(a, b, orderBy)
        : (a, b) => -descendingComparator(a, b, orderBy);
}
function stableSort(array, comparator) {
    const stabilizedThis = array.map((el, index) => [el, index]);
    stabilizedThis.sort((a, b) => {
        const order = comparator(a[0], b[0]);
        if (order !== 0)
            return order;
        return a[1] - b[1];
    });
    return stabilizedThis.map((el) => el[0]);
}
const headCells = [
    { id: 'name', numeric: false, disablePadding: true, label: 'Country/Region' },
    { id: 'confirmed', numeric: true, disablePadding: true, label: 'Confirmed' },
    { id: 'deaths', numeric: true, disablePadding: false, label: 'Deaths' },
    { id: 'recovered', numeric: true, disablePadding: false, label: 'Recovered' },
];
function EnhancedTableHead(props) {
    const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort } = props;
    const createSortHandler = (property) => (event) => {
        onRequestSort(event, property);
    };
    return (React.createElement(TableHead, null,
        React.createElement(TableRow, null,
            React.createElement(TableCell, { padding: "checkbox" },
                React.createElement(Checkbox, { indeterminate: numSelected > 0 && numSelected < rowCount, checked: rowCount > 0 && numSelected === rowCount, onChange: onSelectAllClick, inputProps: { 'aria-label': 'select all desserts' } })),
            headCells.map((headCell) => (React.createElement(TableCell, { key: headCell.id, align: headCell.numeric ? 'right' : 'left', padding: headCell.disablePadding ? 'none' : 'default', sortDirection: orderBy === headCell.id ? order : false },
                React.createElement(TableSortLabel, { active: orderBy === headCell.id, direction: orderBy === headCell.id ? order : 'asc', onClick: createSortHandler(headCell.id) },
                    headCell.label,
                    orderBy === headCell.id ? (React.createElement("span", { className: classes.visuallyHidden }, order === 'desc' ? 'sorted descending' : 'sorted ascending')) : null)))))));
}
const useToolbarStyles = makeStyles((theme) => createStyles({
    root: {
        paddingLeft: theme.spacing(2),
        paddingRight: theme.spacing(1),
    },
    highlight: theme.palette.type === 'light'
        ? {
            color: theme.palette.secondary.main,
            backgroundColor: lighten(theme.palette.secondary.light, 0.85),
        }
        : {
            color: theme.palette.text.primary,
            backgroundColor: theme.palette.secondary.dark,
        },
    title: {
        flex: '1 1 100%',
    },
}));
const EnhancedTableToolbar = (props) => {
    const classes = useToolbarStyles();
    const { numSelected } = props;
    const date = props.processor.latestUpdateDate;
    const dateLabel = date ? props.processor.utc(new Date(date)) : '';
    return (React.createElement(Toolbar, { className: clsx(classes.root, {
            [classes.highlight]: numSelected > 0,
        }) },
        numSelected > 0 ? (React.createElement(Typography, { className: classes.title, color: "inherit", variant: "subtitle1", component: "div" },
            numSelected,
            " selected")) : (React.createElement(Typography, { className: classes.title, variant: "h6", id: "tableTitle", component: "div" }, dateLabel)),
        numSelected > 0 ? (React.createElement(Tooltip, { title: "Delete" },
            React.createElement(IconButton, { "aria-label": "delete" },
                React.createElement(DeleteIcon, null)))) : (React.createElement(Tooltip, { title: "Filter list" },
            React.createElement(IconButton, { "aria-label": "filter list" },
                React.createElement(FilterListIcon, null))))));
};
export const Countries = ({ processor, densePadding }) => {
    const rowsPerPageRange = [10, 20, 30];
    const classes = useStyles();
    const [order, setOrder] = React.useState('desc');
    const [orderBy, setOrderBy] = React.useState('confirmed');
    const [selected, setSelected] = React.useState([]);
    const [page, setPage] = React.useState(0);
    const [rowsPerPage, setRowsPerPage] = React.useState(rowsPerPageRange[0]);
    const rows = processor.model.map((model) => {
        return { ...model.values[model.values.length - 1], name: processor.name(model) };
    });
    const handleRequestSort = (event, property) => {
        const isAsc = orderBy === property && order === 'asc';
        setOrder(isAsc ? 'desc' : 'asc');
        setOrderBy(property);
    };
    const handleSelectAllClick = (event) => {
        if (event.target.checked) {
            const newSelecteds = rows.map((n) => n.name);
            setSelected(newSelecteds);
            return;
        }
        setSelected([]);
    };
    const handleClick = (event, name) => {
        const selectedIndex = selected.indexOf(name);
        let newSelected = [];
        if (selectedIndex === -1) {
            newSelected = newSelected.concat(selected, name);
        }
        else if (selectedIndex === 0) {
            newSelected = newSelected.concat(selected.slice(1));
        }
        else if (selectedIndex === selected.length - 1) {
            newSelected = newSelected.concat(selected.slice(0, -1));
        }
        else if (selectedIndex > 0) {
            newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));
        }
        setSelected(newSelected);
    };
    const handleChangePage = (event, newPage) => {
        setPage(newPage);
    };
    const handleChangeRowsPerPage = (event) => {
        setRowsPerPage(parseInt(event.target.value, 10));
        setPage(0);
    };
    const isSelected = (name) => selected.indexOf(name) !== -1;
    const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);
    return (React.createElement("div", { className: classes.root },
        React.createElement(EnhancedTableToolbar, { numSelected: selected.length, processor: processor }),
        React.createElement(TableContainer, null,
            React.createElement(Table, { className: classes.table, "aria-labelledby": "tableTitle", size: densePadding ? 'small' : 'medium', "aria-label": "enhanced table" },
                React.createElement(EnhancedTableHead, { classes: classes, numSelected: selected.length, order: order, orderBy: orderBy, onSelectAllClick: handleSelectAllClick, onRequestSort: handleRequestSort, rowCount: rows.length }),
                React.createElement(TableBody, null,
                    stableSort(rows, getComparator(order, orderBy))
                        .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)
                        .map((row, index) => {
                        const isItemSelected = isSelected(row.name);
                        const labelId = `enhanced-table-checkbox-${index}`;
                        return (React.createElement(TableRow, { hover: true, onClick: (event) => handleClick(event, row.name), role: "checkbox", "aria-checked": isItemSelected, tabIndex: -1, key: row.name, selected: isItemSelected },
                            React.createElement(TableCell, { padding: "checkbox" },
                                React.createElement(Checkbox, { checked: isItemSelected, inputProps: { 'aria-labelledby': labelId } })),
                            React.createElement(TableCell, { component: "th", id: labelId, scope: "row", padding: "none" }, row.name),
                            React.createElement(TableCell, { align: "right" }, row.confirmed.toLocaleString()),
                            React.createElement(TableCell, { align: "right" }, row.deaths.toLocaleString()),
                            React.createElement(TableCell, { align: "right" }, row.recovered.toLocaleString())));
                    }),
                    emptyRows > 0 && (React.createElement(TableRow, { style: { height: (densePadding ? 33 : 53) * emptyRows } },
                        React.createElement(TableCell, { colSpan: 5 })))))),
        React.createElement(TablePagination, { rowsPerPageOptions: rowsPerPageRange, component: "div", count: rows.length, rowsPerPage: rowsPerPage, page: page, onChangePage: handleChangePage, onChangeRowsPerPage: handleChangeRowsPerPage })));
};
Countries.displayName = 'Countries';
Countries.propTypes = {
    processor: ModelProcessorPropTypes,
    densePadding: PropTypes.bool.isRequired,
};
export default Countries;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnRyaWVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3NjcmlwdC9jb21wb25lbnRzL29yZ2FuaXNtcy9jb3VudHJpZXMvY291bnRyaWVzLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQTRCLE1BQU0sT0FBTyxDQUFDO0FBQ2pELE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQztBQUVuQyxPQUFPLElBQUksTUFBTSxNQUFNLENBQUM7QUFDeEIsT0FBTyxFQUNMLFlBQVksRUFDWixPQUFPLEVBQ1AsVUFBVSxFQUVWLEtBQUssRUFDTCxTQUFTLEVBQ1QsU0FBUyxFQUNULGNBQWMsRUFDZCxTQUFTLEVBQ1QsZUFBZSxFQUNmLFFBQVEsRUFDUixjQUFjLEVBQ2QsT0FBTyxFQUNQLFVBQVUsRUFDVixRQUFRLEVBQ1IsVUFBVSxFQUNWLE9BQU8sR0FDUixNQUFNLG1CQUFtQixDQUFDO0FBRTNCLE9BQU8sRUFBa0IsdUJBQXVCLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDaEUsT0FBTyxFQUFFLE1BQU0sSUFBSSxVQUFVLEVBQUUsVUFBVSxJQUFJLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRXhGLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLEtBQVksRUFBRSxFQUFFLENBQzVDLFlBQVksQ0FBQztJQUNYLElBQUksRUFBRTtRQUNKLEtBQUssRUFBRSxNQUFNO0tBQ2Q7SUFDRCxLQUFLLEVBQUU7UUFDTCxLQUFLLEVBQUUsTUFBTTtRQUNiLFlBQVksRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztLQUMvQjtJQUNELEtBQUssRUFBRTtRQUNMLFFBQVEsRUFBRSxHQUFHO0tBQ2Q7SUFDRCxjQUFjLEVBQUU7UUFDZCxNQUFNLEVBQUUsQ0FBQztRQUNULElBQUksRUFBRSxlQUFlO1FBQ3JCLE1BQU0sRUFBRSxDQUFDO1FBQ1QsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNW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c291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZ1bmN0aW9uQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQge1xuICBjcmVhdGVTdHlsZXMsXG4gIGxpZ2h0ZW4sXG4gIG1ha2VTdHlsZXMsXG4gIFRoZW1lLFxuICBUYWJsZSxcbiAgVGFibGVCb2R5LFxuICBUYWJsZUNlbGwsXG4gIFRhYmxlQ29udGFpbmVyLFxuICBUYWJsZUhlYWQsXG4gIFRhYmxlUGFnaW5hdGlvbixcbiAgVGFibGVSb3csXG4gIFRhYmxlU29ydExhYmVsLFxuICBUb29sYmFyLFxuICBUeXBvZ3JhcGh5LFxuICBDaGVja2JveCxcbiAgSWNvbkJ1dHRvbixcbiAgVG9vbHRpcCxcbn0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUnO1xuXG5pbXBvcnQgeyBNb2RlbFByb2Nlc3NvciwgTW9kZWxQcm9jZXNzb3JQcm9wVHlwZXMgfSBmcm9tICdtb2RlbCc7XG5pbXBvcnQgeyBEZWxldGUgYXMgRGVsZXRlSWNvbiwgRmlsdGVyTGlzdCBhcyBGaWx0ZXJMaXN0SWNvbiB9IGZyb20gJ0BtYXRlcmlhbC11aS9pY29ucyc7XG5cbmNvbnN0IHVzZVN0eWxlcyA9IG1ha2VTdHlsZXMoKHRoZW1lOiBUaGVtZSkgPT5cbiAgY3JlYXRlU3R5bGVzKHtcbiAgICByb290OiB7XG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH0sXG4gICAgcGFwZXI6IHtcbiAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICBtYXJnaW5Cb3R0b206IHRoZW1lLnNwYWNpbmcoMiksXG4gICAgfSxcbiAgICB0YWJsZToge1xuICAgICAgbWluV2lkdGg6IDc1MCxcbiAgICB9LFxuICAgIHZpc3VhbGx5SGlkZGVuOiB7XG4gICAgICBib3JkZXI6IDAsXG4gICAgICBjbGlwOiAncmVjdCgwIDAgMCAwKScsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICBtYXJnaW46IC0xLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgcGFkZGluZzogMCxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgdG9wOiAyMCxcbiAgICAgIHdpZHRoOiAxLFxuICAgIH0sXG4gIH0pLFxuKTtcblxuaW50ZXJmYWNlIERhdGEge1xuICBjb25maXJtZWQ6IG51bWJlcjtcbiAgZGVhdGhzOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgcmVjb3ZlcmVkOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBkZXNjZW5kaW5nQ29tcGFyYXRvcjxUPihhOiBULCBiOiBULCBvcmRlckJ5OiBrZXlvZiBUKSB7XG4gIGlmIChiW29yZGVyQnldIDwgYVtvcmRlckJ5XSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoYltvcmRlckJ5XSA+IGFbb3JkZXJCeV0pIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuICByZXR1cm4gMDtcbn1cblxudHlwZSBPcmRlciA9ICdhc2MnIHwgJ2Rlc2MnO1xuXG5mdW5jdGlvbiBnZXRDb21wYXJhdG9yPEtleSBleHRlbmRzIGtleW9mIERhdGE+KFxuICBvcmRlcjogT3JkZXIsXG4gIG9yZGVyQnk6IEtleSxcbik6IChhOiB7IFtrZXkgaW4gS2V5XTogbnVtYmVyIHwgc3RyaW5nIH0sIGI6IHsgW2tleSBpbiBLZXldOiBudW1iZXIgfCBzdHJpbmcgfSkgPT4gbnVtYmVyIHtcbiAgcmV0dXJuIG9yZGVyID09PSAnZGVzYydcbiAgICA/IChhLCBiKSA9PiBkZXNjZW5kaW5nQ29tcGFyYXRvcihhLCBiLCBvcmRlckJ5KVxuICAgIDogKGEsIGIpID0+IC1kZXNjZW5kaW5nQ29tcGFyYXRvcihhLCBiLCBvcmRlckJ5KTtcbn1cblxuZnVuY3Rpb24gc3RhYmxlU29ydDxUPihhcnJheTogVFtdLCBjb21wYXJhdG9yOiAoYTogVCwgYjogVCkgPT4gbnVtYmVyKSB7XG4gIGNvbnN0IHN0YWJpbGl6ZWRUaGlzID0gYXJyYXkubWFwKChlbCwgaW5kZXgpID0+IFtlbCwgaW5kZXhdIGFzIFtULCBudW1iZXJdKTtcbiAgc3RhYmlsaXplZFRoaXMuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gY29tcGFyYXRvcihhWzBdLCBiWzBdKTtcbiAgICBpZiAob3JkZXIgIT09IDApIHJldHVybiBvcmRlcjtcbiAgICByZXR1cm4gYVsxXSAtIGJbMV07XG4gIH0pO1xuICByZXR1cm4gc3RhYmlsaXplZFRoaXMubWFwKChlbCkgPT4gZWxbMF0pO1xufVxuXG5pbnRlcmZhY2UgSGVhZENlbGwge1xuICBkaXNhYmxlUGFkZGluZzogYm9vbGVhbjtcbiAgaWQ6IGtleW9mIERhdGE7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIG51bWVyaWM6IGJvb2xlYW47XG59XG5cbmNvbnN0IGhlYWRDZWxsczogSGVhZENlbGxbXSA9IFtcbiAgeyBpZDogJ25hbWUnLCBudW1lcmljOiBmYWxzZSwgZGlzYWJsZVBhZGRpbmc6IHRydWUsIGxhYmVsOiAnQ291bnRyeS9SZWdpb24nIH0sXG4gIHsgaWQ6ICdjb25maXJtZWQnLCBudW1lcmljOiB0cnVlLCBkaXNhYmxlUGFkZGluZzogdHJ1ZSwgbGFiZWw6ICdDb25maXJtZWQnIH0sXG4gIHsgaWQ6ICdkZWF0aHMnLCBudW1lcmljOiB0cnVlLCBkaXNhYmxlUGFkZGluZzogZmFsc2UsIGxhYmVsOiAnRGVhdGhzJyB9LFxuICB7IGlkOiAncmVjb3ZlcmVkJywgbnVtZXJpYzogdHJ1ZSwgZGlzYWJsZVBhZGRpbmc6IGZhbHNlLCBsYWJlbDogJ1JlY292ZXJlZCcgfSxcbl07XG5cbmludGVyZmFjZSBFbmhhbmNlZFRhYmxlUHJvcHMge1xuICBjbGFzc2VzOiBSZXR1cm5UeXBlPHR5cGVvZiB1c2VTdHlsZXM+O1xuICBudW1TZWxlY3RlZDogbnVtYmVyO1xuICBvblJlcXVlc3RTb3J0OiAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8dW5rbm93bj4sIHByb3BlcnR5OiBrZXlvZiBEYXRhKSA9PiB2b2lkO1xuICBvblNlbGVjdEFsbENsaWNrOiAoZXZlbnQ6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB2b2lkO1xuICBvcmRlcjogT3JkZXI7XG4gIG9yZGVyQnk6IHN0cmluZztcbiAgcm93Q291bnQ6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gRW5oYW5jZWRUYWJsZUhlYWQocHJvcHM6IEVuaGFuY2VkVGFibGVQcm9wcykge1xuICBjb25zdCB7IGNsYXNzZXMsIG9uU2VsZWN0QWxsQ2xpY2ssIG9yZGVyLCBvcmRlckJ5LCBudW1TZWxlY3RlZCwgcm93Q291bnQsIG9uUmVxdWVzdFNvcnQgfSA9IHByb3BzO1xuICBjb25zdCBjcmVhdGVTb3J0SGFuZGxlciA9IChwcm9wZXJ0eToga2V5b2YgRGF0YSkgPT4gKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PHVua25vd24+KSA9PiB7XG4gICAgb25SZXF1ZXN0U29ydChldmVudCwgcHJvcGVydHkpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFRhYmxlSGVhZD5cbiAgICAgIDxUYWJsZVJvdz5cbiAgICAgICAgPFRhYmxlQ2VsbCBwYWRkaW5nPVwiY2hlY2tib3hcIj5cbiAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU9e251bVNlbGVjdGVkID4gMCAmJiBudW1TZWxlY3RlZCA8IHJvd0NvdW50fVxuICAgICAgICAgICAgY2hlY2tlZD17cm93Q291bnQgPiAwICYmIG51bVNlbGVjdGVkID09PSByb3dDb3VudH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvblNlbGVjdEFsbENsaWNrfVxuICAgICAgICAgICAgaW5wdXRQcm9wcz17eyAnYXJpYS1sYWJlbCc6ICdzZWxlY3QgYWxsIGRlc3NlcnRzJyB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVGFibGVDZWxsPlxuICAgICAgICB7aGVhZENlbGxzLm1hcCgoaGVhZENlbGwpID0+IChcbiAgICAgICAgICA8VGFibGVDZWxsXG4gICAgICAgICAgICBrZXk9e2hlYWRDZWxsLmlkfVxuICAgICAgICAgICAgYWxpZ249e2hlYWRDZWxsLm51bWVyaWMgPyAncmlnaHQnIDogJ2xlZnQnfVxuICAgICAgICAgICAgcGFkZGluZz17aGVhZENlbGwuZGlzYWJsZVBhZGRpbmcgPyAnbm9uZScgOiAnZGVmYXVsdCd9XG4gICAgICAgICAgICBzb3J0RGlyZWN0aW9uPXtvcmRlckJ5ID09PSBoZWFkQ2VsbC5pZCA/IG9yZGVyIDogZmFsc2V9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFRhYmxlU29ydExhYmVsXG4gICAgICAgICAgICAgIGFjdGl2ZT17b3JkZXJCeSA9PT0gaGVhZENlbGwuaWR9XG4gICAgICAgICAgICAgIGRpcmVjdGlvbj17b3JkZXJCeSA9PT0gaGVhZENlbGwuaWQgPyBvcmRlciA6ICdhc2MnfVxuICAgICAgICAgICAgICBvbkNsaWNrPXtjcmVhdGVTb3J0SGFuZGxlcihoZWFkQ2VsbC5pZCl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtoZWFkQ2VsbC5sYWJlbH1cbiAgICAgICAgICAgICAge29yZGVyQnkgPT09IGhlYWRDZWxsLmlkID8gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3Nlcy52aXN1YWxseUhpZGRlbn0+XG4gICAgICAgICAgICAgICAgICB7b3JkZXIgPT09ICdkZXNjJyA/ICdzb3J0ZWQgZGVzY2VuZGluZycgOiAnc29ydGVkIGFzY2VuZGluZyd9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgIDwvVGFibGVTb3J0TGFiZWw+XG4gICAgICAgICAgPC9UYWJsZUNlbGw+XG4gICAgICAgICkpfVxuICAgICAgPC9UYWJsZVJvdz5cbiAgICA8L1RhYmxlSGVhZD5cbiAgKTtcbn1cblxuY29uc3QgdXNlVG9vbGJhclN0eWxlcyA9IG1ha2VTdHlsZXMoKHRoZW1lOiBUaGVtZSkgPT5cbiAgY3JlYXRlU3R5bGVzKHtcbiAgICByb290OiB7XG4gICAgICBwYWRkaW5nTGVmdDogdGhlbWUuc3BhY2luZygyKSxcbiAgICAgIHBhZGRpbmdSaWdodDogdGhlbWUuc3BhY2luZygxKSxcbiAgICB9LFxuICAgIGhpZ2hsaWdodDpcbiAgICAgIHRoZW1lLnBhbGV0dGUudHlwZSA9PT0gJ2xpZ2h0J1xuICAgICAgICA/IHtcbiAgICAgICAgICAgIGNvbG9yOiB0aGVtZS5wYWxldHRlLnNlY29uZGFyeS5tYWluLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBsaWdodGVuKHRoZW1lLnBhbGV0dGUuc2Vjb25kYXJ5LmxpZ2h0LCAwLjg1KSxcbiAgICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgY29sb3I6IHRoZW1lLnBhbGV0dGUudGV4dC5wcmltYXJ5LFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5wYWxldHRlLnNlY29uZGFyeS5kYXJrLFxuICAgICAgICAgIH0sXG4gICAgdGl0bGU6IHtcbiAgICAgIGZsZXg6ICcxIDEgMTAwJScsXG4gICAgfSxcbiAgfSksXG4pO1xuXG5pbnRlcmZhY2UgRW5oYW5jZWRUYWJsZVRvb2xiYXJQcm9wcyB7XG4gIG51bVNlbGVjdGVkOiBudW1iZXI7XG4gIHByb2Nlc3NvcjogTW9kZWxQcm9jZXNzb3I7XG59XG5cbmNvbnN0IEVuaGFuY2VkVGFibGVUb29sYmFyID0gKHByb3BzOiBFbmhhbmNlZFRhYmxlVG9vbGJhclByb3BzKSA9PiB7XG4gIGNvbnN0IGNsYXNzZXMgPSB1c2VUb29sYmFyU3R5bGVzKCk7XG4gIGNvbnN0IHsgbnVtU2VsZWN0ZWQgfSA9IHByb3BzO1xuICBjb25zdCBkYXRlID0gcHJvcHMucHJvY2Vzc29yLmxhdGVzdFVwZGF0ZURhdGU7XG4gIGNvbnN0IGRhdGVMYWJlbCA9IGRhdGUgPyBwcm9wcy5wcm9jZXNzb3IudXRjKG5ldyBEYXRlKGRhdGUpKSA6ICcnO1xuXG4gIHJldHVybiAoXG4gICAgPFRvb2xiYXJcbiAgICAgIGNsYXNzTmFtZT17Y2xzeChjbGFzc2VzLnJvb3QsIHtcbiAgICAgICAgW2NsYXNzZXMuaGlnaGxpZ2h0XTogbnVtU2VsZWN0ZWQgPiAwLFxuICAgICAgfSl9XG4gICAgPlxuICAgICAge251bVNlbGVjdGVkID4gMCA/IChcbiAgICAgICAgPFR5cG9ncmFwaHkgY2xhc3NOYW1lPXtjbGFzc2VzLnRpdGxlfSBjb2xvcj1cImluaGVyaXRcIiB2YXJpYW50PVwic3VidGl0bGUxXCIgY29tcG9uZW50PVwiZGl2XCI+XG4gICAgICAgICAge251bVNlbGVjdGVkfSBzZWxlY3RlZFxuICAgICAgICA8L1R5cG9ncmFwaHk+XG4gICAgICApIDogKFxuICAgICAgICA8VHlwb2dyYXBoeSBjbGFzc05hbWU9e2NsYXNzZXMudGl0bGV9IHZhcmlhbnQ9XCJoNlwiIGlkPVwidGFibGVUaXRsZVwiIGNvbXBvbmVudD1cImRpdlwiPlxuICAgICAgICAgIHtkYXRlTGFiZWx9XG4gICAgICAgIDwvVHlwb2dyYXBoeT5cbiAgICAgICl9XG4gICAgICB7bnVtU2VsZWN0ZWQgPiAwID8gKFxuICAgICAgICA8VG9vbHRpcCB0aXRsZT1cIkRlbGV0ZVwiPlxuICAgICAgICAgIDxJY29uQnV0dG9uIGFyaWEtbGFiZWw9XCJkZWxldGVcIj5cbiAgICAgICAgICAgIDxEZWxldGVJY29uIC8+XG4gICAgICAgICAgPC9JY29uQnV0dG9uPlxuICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICApIDogKFxuICAgICAgICA8VG9vbHRpcCB0aXRsZT1cIkZpbHRlciBsaXN0XCI+XG4gICAgICAgICAgPEljb25CdXR0b24gYXJpYS1sYWJlbD1cImZpbHRlciBsaXN0XCI+XG4gICAgICAgICAgICA8RmlsdGVyTGlzdEljb24gLz5cbiAgICAgICAgICA8L0ljb25CdXR0b24+XG4gICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICl9XG4gICAgPC9Ub29sYmFyPlxuICApO1xufTtcblxudHlwZSBDb3VudHJpZXNQcm9wcyA9IHtcbiAgcHJvY2Vzc29yOiBNb2RlbFByb2Nlc3NvcjtcbiAgZGVuc2VQYWRkaW5nOiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNvbnN0IENvdW50cmllczogRnVuY3Rpb25Db21wb25lbnQ8Q291bnRyaWVzUHJvcHM+ID0gKHsgcHJvY2Vzc29yLCBkZW5zZVBhZGRpbmcgfSkgPT4ge1xuICBjb25zdCByb3dzUGVyUGFnZVJhbmdlID0gWzEwLCAyMCwgMzBdO1xuICBjb25zdCBjbGFzc2VzID0gdXNlU3R5bGVzKCk7XG4gIGNvbnN0IFtvcmRlciwgc2V0T3JkZXJdID0gUmVhY3QudXNlU3RhdGU8T3JkZXI+KCdkZXNjJyk7XG4gIGNvbnN0IFtvcmRlckJ5LCBzZXRPcmRlckJ5XSA9IFJlYWN0LnVzZVN0YXRlPGtleW9mIERhdGE+KCdjb25maXJtZWQnKTtcbiAgY29uc3QgW3NlbGVjdGVkLCBzZXRTZWxlY3RlZF0gPSBSZWFjdC51c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSBSZWFjdC51c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3Jvd3NQZXJQYWdlLCBzZXRSb3dzUGVyUGFnZV0gPSBSZWFjdC51c2VTdGF0ZShyb3dzUGVyUGFnZVJhbmdlWzBdKTtcbiAgY29uc3Qgcm93cyA9IHByb2Nlc3Nvci5tb2RlbC5tYXAoKG1vZGVsKSA9PiB7XG4gICAgcmV0dXJuIHsgLi4ubW9kZWwudmFsdWVzW21vZGVsLnZhbHVlcy5sZW5ndGggLSAxXSwgbmFtZTogcHJvY2Vzc29yLm5hbWUobW9kZWwpIH07XG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZVJlcXVlc3RTb3J0ID0gKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PHVua25vd24+LCBwcm9wZXJ0eToga2V5b2YgRGF0YSkgPT4ge1xuICAgIGNvbnN0IGlzQXNjID0gb3JkZXJCeSA9PT0gcHJvcGVydHkgJiYgb3JkZXIgPT09ICdhc2MnO1xuICAgIHNldE9yZGVyKGlzQXNjID8gJ2Rlc2MnIDogJ2FzYycpO1xuICAgIHNldE9yZGVyQnkocHJvcGVydHkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdEFsbENsaWNrID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuICAgICAgY29uc3QgbmV3U2VsZWN0ZWRzID0gcm93cy5tYXAoKG4pID0+IG4ubmFtZSk7XG4gICAgICBzZXRTZWxlY3RlZChuZXdTZWxlY3RlZHMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRTZWxlY3RlZChbXSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8dW5rbm93bj4sIG5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZC5pbmRleE9mKG5hbWUpO1xuICAgIGxldCBuZXdTZWxlY3RlZDogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChzZWxlY3RlZEluZGV4ID09PSAtMSkge1xuICAgICAgbmV3U2VsZWN0ZWQgPSBuZXdTZWxlY3RlZC5jb25jYXQoc2VsZWN0ZWQsIG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRJbmRleCA9PT0gMCkge1xuICAgICAgbmV3U2VsZWN0ZWQgPSBuZXdTZWxlY3RlZC5jb25jYXQoc2VsZWN0ZWQuc2xpY2UoMSkpO1xuICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRJbmRleCA9PT0gc2VsZWN0ZWQubGVuZ3RoIC0gMSkge1xuICAgICAgbmV3U2VsZWN0ZWQgPSBuZXdTZWxlY3RlZC5jb25jYXQoc2VsZWN0ZWQuc2xpY2UoMCwgLTEpKTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGVkSW5kZXggPiAwKSB7XG4gICAgICBuZXdTZWxlY3RlZCA9IG5ld1NlbGVjdGVkLmNvbmNhdChzZWxlY3RlZC5zbGljZSgwLCBzZWxlY3RlZEluZGV4KSwgc2VsZWN0ZWQuc2xpY2Uoc2VsZWN0ZWRJbmRleCArIDEpKTtcbiAgICB9XG5cbiAgICBzZXRTZWxlY3RlZChuZXdTZWxlY3RlZCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlUGFnZSA9IChldmVudDogdW5rbm93biwgbmV3UGFnZTogbnVtYmVyKSA9PiB7XG4gICAgc2V0UGFnZShuZXdQYWdlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VSb3dzUGVyUGFnZSA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBzZXRSb3dzUGVyUGFnZShwYXJzZUludChldmVudC50YXJnZXQudmFsdWUsIDEwKSk7XG4gICAgc2V0UGFnZSgwKTtcbiAgfTtcblxuICBjb25zdCBpc1NlbGVjdGVkID0gKG5hbWU6IHN0cmluZykgPT4gc2VsZWN0ZWQuaW5kZXhPZihuYW1lKSAhPT0gLTE7XG5cbiAgY29uc3QgZW1wdHlSb3dzID0gcm93c1BlclBhZ2UgLSBNYXRoLm1pbihyb3dzUGVyUGFnZSwgcm93cy5sZW5ndGggLSBwYWdlICogcm93c1BlclBhZ2UpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMucm9vdH0+XG4gICAgICA8RW5oYW5jZWRUYWJsZVRvb2xiYXIgbnVtU2VsZWN0ZWQ9e3NlbGVjdGVkLmxlbmd0aH0gcHJvY2Vzc29yPXtwcm9jZXNzb3J9IC8+XG4gICAgICA8VGFibGVDb250YWluZXI+XG4gICAgICAgIDxUYWJsZVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy50YWJsZX1cbiAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9XCJ0YWJsZVRpdGxlXCJcbiAgICAgICAgICBzaXplPXtkZW5zZVBhZGRpbmcgPyAnc21hbGwnIDogJ21lZGl1bSd9XG4gICAgICAgICAgYXJpYS1sYWJlbD1cImVuaGFuY2VkIHRhYmxlXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxFbmhhbmNlZFRhYmxlSGVhZFxuICAgICAgICAgICAgY2xhc3Nlcz17Y2xhc3Nlc31cbiAgICAgICAgICAgIG51bVNlbGVjdGVkPXtzZWxlY3RlZC5sZW5ndGh9XG4gICAgICAgICAgICBvcmRlcj17b3JkZXJ9XG4gICAgICAgICAgICBvcmRlckJ5PXtvcmRlckJ5fVxuICAgICAgICAgICAgb25TZWxlY3RBbGxDbGljaz17aGFuZGxlU2VsZWN0QWxsQ2xpY2t9XG4gICAgICAgICAgICBvblJlcXVlc3RTb3J0PXtoYW5kbGVSZXF1ZXN0U29ydH1cbiAgICAgICAgICAgIHJvd0NvdW50PXtyb3dzLmxlbmd0aH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxUYWJsZUJvZHk+XG4gICAgICAgICAgICB7c3RhYmxlU29ydChyb3dzLCBnZXRDb21wYXJhdG9yKG9yZGVyLCBvcmRlckJ5KSlcbiAgICAgICAgICAgICAgLnNsaWNlKHBhZ2UgKiByb3dzUGVyUGFnZSwgcGFnZSAqIHJvd3NQZXJQYWdlICsgcm93c1BlclBhZ2UpXG4gICAgICAgICAgICAgIC5tYXAoKHJvdywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0l0ZW1TZWxlY3RlZCA9IGlzU2VsZWN0ZWQocm93Lm5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsSWQgPSBgZW5oYW5jZWQtdGFibGUtY2hlY2tib3gtJHtpbmRleH1gO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxUYWJsZVJvd1xuICAgICAgICAgICAgICAgICAgICBob3ZlclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IGhhbmRsZUNsaWNrKGV2ZW50LCByb3cubmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtY2hlY2tlZD17aXNJdGVtU2VsZWN0ZWR9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PXstMX1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtyb3cubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e2lzSXRlbVNlbGVjdGVkfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8VGFibGVDZWxsIHBhZGRpbmc9XCJjaGVja2JveFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxDaGVja2JveCBjaGVja2VkPXtpc0l0ZW1TZWxlY3RlZH0gaW5wdXRQcm9wcz17eyAnYXJpYS1sYWJlbGxlZGJ5JzogbGFiZWxJZCB9fSAvPlxuICAgICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBjb21wb25lbnQ9XCJ0aFwiIGlkPXtsYWJlbElkfSBzY29wZT1cInJvd1wiIHBhZGRpbmc9XCJub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAge3Jvdy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBhbGlnbj1cInJpZ2h0XCI+e3Jvdy5jb25maXJtZWQudG9Mb2NhbGVTdHJpbmcoKX08L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBhbGlnbj1cInJpZ2h0XCI+e3Jvdy5kZWF0aHMudG9Mb2NhbGVTdHJpbmcoKX08L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBhbGlnbj1cInJpZ2h0XCI+e3Jvdy5yZWNvdmVyZWQudG9Mb2NhbGVTdHJpbmcoKX08L1RhYmxlQ2VsbD5cbiAgICAgICAgICAgICAgICAgIDwvVGFibGVSb3c+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICB7ZW1wdHlSb3dzID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxUYWJsZVJvdyBzdHlsZT17eyBoZWlnaHQ6IChkZW5zZVBhZGRpbmcgPyAzMyA6IDUzKSAqIGVtcHR5Um93cyB9fT5cbiAgICAgICAgICAgICAgICA8VGFibGVDZWxsIGNvbFNwYW49ezV9IC8+XG4gICAgICAgICAgICAgIDwvVGFibGVSb3c+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvVGFibGVCb2R5PlxuICAgICAgICA8L1RhYmxlPlxuICAgICAgPC9UYWJsZUNvbnRhaW5lcj5cbiAgICAgIDxUYWJsZVBhZ2luYXRpb25cbiAgICAgICAgcm93c1BlclBhZ2VPcHRpb25zPXtyb3dzUGVyUGFnZVJhbmdlfVxuICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICBjb3VudD17cm93cy5sZW5ndGh9XG4gICAgICAgIHJvd3NQZXJQYWdlPXtyb3dzUGVyUGFnZX1cbiAgICAgICAgcGFnZT17cGFnZX1cbiAgICAgICAgb25DaGFuZ2VQYWdlPXtoYW5kbGVDaGFuZ2VQYWdlfVxuICAgICAgICBvbkNoYW5nZVJvd3NQZXJQYWdlPXtoYW5kbGVDaGFuZ2VSb3dzUGVyUGFnZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5Db3VudHJpZXMuZGlzcGxheU5hbWUgPSAnQ291bnRyaWVzJztcblxuQ291bnRyaWVzLnByb3BUeXBlcyA9IHtcbiAgcHJvY2Vzc29yOiBNb2RlbFByb2Nlc3NvclByb3BUeXBlcyxcbiAgZGVuc2VQYWRkaW5nOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgQ291bnRyaWVzO1xuIl19