import e,{memo as o,useState as C}from"react";import{ComposedChart as P,XAxis as K,YAxis as G,CartesianGrid as z,ResponsiveContainer as U,Line as M,Legend as Y}from"recharts";import{ModelArrayPropTypes as _,nameFormatter as S}from"model";import A,{Sort as T}from"model/sorter";export const Top=({models:t})=>{const a=new A(T.CONFIRMED_DESC);a.by=T.CONFIRMED_DESC,a.idx=t[0].values.length-1;const[o,r]=C("confirmed"),m=[...t].sort(a.sort).slice(0,9);let s=Number.MIN_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,l=Number.MAX_VALUE;const p=["#f00","#0f0","#00f","#ff0","#fff","#f0f","#0ff","#eee","#000","#000","#000"],c=m.map(e=>({name:S(e),values:e.values.filter(e=>e[o]>0).map(e=>(e.timestamp>s&&(s=e.timestamp),e.timestamp<i&&(i=e.timestamp),e.ratio[o]>n&&(n=e.ratio[o]),e.ratio[o]<l&&(l=e.ratio[o]),{value:e.ratio[o],timestamp:e.timestamp}))})),d=["auto",1.2*n],f=[i-1296e5,s+1296e5];return e.createElement("div",{className:"plot"},e.createElement(U,{aspect:21/9},e.createElement(P,{margin:{top:5,right:50,left:50,bottom:5}},e.createElement(z,{stroke:"#eee",strokeDasharray:"3 3"}),e.createElement(K,{type:"number",name:"Date",dataKey:"timestamp",scale:"time",domain:f,minTickGap:30,tickFormatter:e=>new Date(e).toUTCString().replace(/\s00:.*/,"")}),e.createElement(G,{yAxisId:"log",dataKey:"value",scale:"log",orientation:"left",domain:d,tickFormatter:e=>e.toLocaleString()}),e.createElement(Y,null),c.map((t,a)=>e.createElement(M,{key:a,name:t.name,data:t.values,yAxisId:"log",type:"monotone",dataKey:"value",stroke:p[a],dot:!1})))))};Top.displayName="Top",Top.propTypes={models:_};export default o(Top);