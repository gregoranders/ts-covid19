(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{45:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(12),r=n(7),l=n(0),o=n.n(l),s=n(6),i=(n(2),n(1)),c=n(4),d=n(5);o.a.Component;o.a.Component;var u=function(e,t){return"function"==typeof e?e(t):e},m=function(e,t){return"string"==typeof e?Object(s.c)(e,null,null,t):e},p=function(e){return e},f=o.a.forwardRef;void 0===f&&(f=p);var h=f((function(e,t){var n=e.innerRef,a=e.navigate,r=e.onClick,l=Object(c.a)(e,["innerRef","navigate","onClick"]),s=l.target,d=Object(i.a)({},l,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),a())}});return d.ref=p!==f&&t||n,o.a.createElement("a",d)}));var E=f((function(e,t){var n=e.component,r=void 0===n?h:n,l=e.replace,s=e.to,E=e.innerRef,v=Object(c.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(d.a)(!1);var n=e.history,a=m(u(s,e.location),e.location),c=a?n.createHref(a):"",h=Object(i.a)({},v,{href:c,navigate:function(){var t=u(s,e.location);(l?n.replace:n.push)(t)}});return p!==f?h.ref=t||E:h.innerRef=E,o.a.createElement(r,h)}))})),v=function(e){return e},y=o.a.forwardRef;void 0===y&&(y=v);var g=y((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,l=e.activeClassName,s=void 0===l?"active":l,p=e.activeStyle,f=e.className,h=e.exact,g=e.isActive,b=e.location,R=e.strict,w=e.style,C=e.to,_=e.innerRef,O=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return o.a.createElement(a.e.Consumer,null,(function(e){e||Object(d.a)(!1);var n=b||e.location,l=m(u(C,n),n),c=l.pathname,N=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=N?Object(a.f)(n.pathname,{path:N,exact:h,strict:R}):null,D=!!(g?g(S,n):S),j=D?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(f,s):f,q=D?Object(i.a)({},w,{},p):w,L=Object(i.a)({"aria-current":D&&r||null,className:j,style:q,to:l},O);return v!==y?L.ref=t||_:L.innerRef=_,o.a.createElement(E,L)}))}))},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2),r=n.n(a);const l=r.a.shape({confirmed:r.a.number.isRequired,deaths:r.a.number.isRequired,recovered:r.a.number.isRequired,timestamp:r.a.number.isRequired}).isRequired,o=r.a.shape({country:r.a.string.isRequired,state:r.a.string.isRequired,lat:r.a.number.isRequired,lon:r.a.number.isRequired,values:r.a.arrayOf(l).isRequired}).isRequired},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));const a={undefined:!1,fieldSeparator:",",lineSeparator:"\n",quote:'"'},r=(e,t)=>{if(!t.undefined||e.length)return e},l=(e,t,n)=>{t.push(e),n.field++,n.fieldOffset=-1,n.appendField=!1},o=(e,t,n)=>{t.push(e),n.field=0,n.line++,n.lineOffset=-1,n.appendRow=!1},s=(e,t=a)=>new Promise(n=>{((e,t=a)=>{const n=Object.assign({},a,t),s={field:0,fieldOffset:0,line:0,lineOffset:0,quoted:!1,appendCell:!1,appendField:!1,appendRow:!1};return new Promise((t,a)=>{if(e.length){const i=[];let c=[],d="";for(let t=0;t<e.length;t++)s.appendCell=!0,e[t]===n.quote?t&&"\\"!==e[t-1]?(!d.length||s.quoted?s.quoted=!s.quoted:a(Error(`Invalid CSV text at offset ${s.line}:${s.lineOffset}`)),s.appendCell=!1):d=d.substr(0,d.length-1):e[t]===n.fieldSeparator?s.quoted||(s.appendCell=!1,s.appendField=!0):e[t]===n.lineSeparator&&(s.quoted||(s.appendCell=!1,s.appendField=!0,s.appendRow=!0)),s.appendCell&&(d+=e[t]),s.appendField&&(l(r(d,n),c,s),d=""),s.appendRow&&(o(c,i,s),c=[]),s.lineOffset++,s.fieldOffset++;c.length&&(l(r(d,n),c,s),o(c,i,s)),t(i)}else a(Error("Empty CSV text"))})})(e,t).then(e=>{const t=e[0].filter(e=>"string"==typeof e);n(e.filter((e,t)=>t>0).map(e=>{const n={};return t.forEach((t,a)=>{n[t]=e[a]}),n}))})});class i{map(e){return e.map(e=>this._map(e)).sort((e,t)=>{const n=e.country.localeCompare(t.country);return 0===n?e.state.localeCompare(t.state):n})}_map(e){const t={values:[]};return Object.keys(e).forEach(n=>{if(n.match(/State/))t.state=e[n];else if(n.match(/Country/))t.country=e[n];else if(n.match(/Lat/))t.lat=parseFloat(e[n]);else if(n.match(/Long/))t.lon=parseFloat(e[n]);else{const a=parseInt(e[n],10),r=new Date(n),l=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());t.values.push({timestamp:l,value:a})}}),t.values.sort((e,t)=>e.timestamp-t.timestamp),Object.freeze(t)}}var c;!function(e){e.CONFIRMED="confirmed",e.DEATHS="deaths",e.RECOVERED="recovered"}(c||(c={}));class d{constructor(e=new i){this._mapper=e}async collect(){const e=await this._fetchModel(c.CONFIRMED),t=await this._fetchModel(c.DEATHS),n=await this._fetchModel(c.RECOVERED);return this.merge(e,t,n)}findSeries(e,t){const n=t.find(t=>t.timestamp===e);return n?n.value:0}async merge(e,t,n){return new Promise(a=>{const r=e.map(e=>{const a=t.find(t=>t.country===e.country&&t.state===e.state),r=n.find(t=>t.country===e.country&&t.state===e.state),l=e.values.map(e=>Object.freeze({confirmed:e.value,deaths:this.findSeries(e.timestamp,a?a.values:[]),recovered:this.findSeries(e.timestamp,r?r.values:[]),timestamp:e.timestamp}));return Object.freeze({country:e.country,lat:e.lat,lon:e.lon,state:e.state,values:Object.freeze(l)})});a(Object.freeze(r))})}async _fetchModel(e){return this._fetch(e).then(e=>s(e)).then(e=>this._mapper.map(e))}async _fetch(e){return fetch(this._fetchUrl(e),{headers:this._fetchHeaders(),method:"GET"}).then(e=>e.text())}_fetchHeaders(){return{"Accept-Encoding":"gzip, deflate, br"}}_fetchUrl(e){return`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_${e}_global.csv`}}},48:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return r}));var a=n(46);n(47);class r{constructor(e){this._model=[],this._model=e.map(e=>({...e,values:e.values.map(e=>({...e}))}))}get model(){return this._model}name(e){return e.state&&e.state.length?`${e.country} - ${e.state}`:e.country}find(e,t){return this._model.find(n=>t&&t.length?n.country===e&&n.state===t:n.country===e)}sort(e){return this._model.sort(e)}}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(0),r=n.n(a),l=n(2),o=n.n(l),s="_3KxrVgLSYRSAbdatw-1rt9",i="_V96JD3PEs1VXevJsy4V5",c="_2NyXajw3HWRS22N9-62SV0",d="_3calS0aV2eqbdFM551AfnX",u="WDuQNtbOBUtMUFonGoy_z",m=n(45);const p=({to:e,children:t})=>r.a.createElement(m.a,{className:d,activeClassName:u,to:e},t);p.displayName="NavLink",p.propTypes={to:o.a.string.isRequired,children:o.a.string.isRequired};var f=n(10),h="NaptN3rjGenMgLZRBODV3",E="iVnnRdgIpyjErxSYM6z_6",v=n(18),y=n(47);const g=Object(f.c)(e=>({model:e.model}),e=>({update:()=>(e=>((new y.a).collect().then(t=>{e({type:v.b,payload:t})}).catch(e=>{console.error(e)}),e({type:v.a})))(e)}));class b extends a.Component{componentDidMount(){this.props.model&&this.props.model.length||this.updateModel()}updateModel(){this.props.update()}render(){const e=this.props.model.length?h:E;return r.a.createElement("span",{className:e,onClick:()=>{this.updateModel()}},r.a.createElement("i",{className:"fas fa-cloud-download-alt"}))}}b.displayName="UpdateButtonComponent";var R=g(b);const w=()=>r.a.createElement("nav",{className:c},r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(p,{to:"/"},"ts-covid19")),r.a.createElement("li",null,r.a.createElement(p,{to:"/Germany"},"Germany")),r.a.createElement("li",null,r.a.createElement(p,{to:"/US"},"US")),r.a.createElement("li",null,r.a.createElement(p,{to:"/Poland"},"Poland")),r.a.createElement("li",null,r.a.createElement(p,{to:"/Russia"},"Russia")),r.a.createElement("li",null,r.a.createElement(p,{to:"/United%20Kingdom"},"United Kingdom"))),r.a.createElement(R,null));w.displayName="Navigation";const C=()=>r.a.createElement("header",{className:i},r.a.createElement(w,null));C.displayName="Header";var _="_1PDbAeZ0pxuBdfDNhaQjo7";const O=e=>r.a.createElement("footer",{className:_},r.a.createElement("p",null,"Â© ",e.year," by ",e.author));O.displayName="Footer",O.propTypes={author:o.a.string,year:o.a.number},O.defaultProps={author:"Gregor Anders",year:(new Date).getFullYear()};const N=({children:e})=>r.a.createElement("div",{className:s},r.a.createElement(C,null),r.a.createElement("section",null,e),r.a.createElement(O,null));N.displayName="DefaultTemplate",N.defaultProps={children:r.a.createElement("h1",null,"Missing Template Content")},N.propTypes={children:o.a.element.isRequired}},51:function(e,t,n){"use strict";n.r(t),n.d(t,"DetailPageComponent",(function(){return E})),n.d(t,"DetailPage",(function(){return v}));var a=n(0),r=n.n(a),l=n(2),o=n.n(l),s=n(12),i=n(10),c="_2qg7IMpNfTZ-PI1-DsLvlj",d=n(49),u=n(46),m=n(48),p="_3PvpfmC7da5HzPw4gCpBNd";class f extends a.PureComponent{constructor(e){super(e),this.state={width:window.innerWidth},this.resizeListener=this.resizeListener.bind(this)}resizeListener(){this.setState({...this.state,width:window.innerWidth})}componentDidMount(){window.addEventListener("resize",this.resizeListener)}componentWillUnmount(){window.removeEventListener("resize",this.resizeListener)}get header(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Confirmed"),r.a.createElement("th",null,"Deaths"),r.a.createElement("th",null,"%"),r.a.createElement("th",null,"Recovered"),r.a.createElement("th",null,"%"),r.a.createElement("th",null,"Active"),r.a.createElement("th",null,"%")))}get body(){const e=this.props.model.values.map((e,t,n)=>{const a=t?n[t-1]:e,l=e,o=a.confirmed-a.deaths-a.recovered,s=l.confirmed-l.deaths-l.recovered,i=l.confirmed?l.deaths/l.confirmed*100:0,c=l.confirmed?l.recovered/l.confirmed*100:0,d=l.confirmed?s/l.confirmed*100:0,u=l.confirmed-a.confirmed,m=l.deaths-a.deaths,p=l.recovered-a.recovered,f=s-o;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,new Date(e.timestamp).toUTCString().replace(/\s00:00:00.*/,"")),r.a.createElement("td",null,e.confirmed.toLocaleString(),r.a.createElement("span",null,"(",u.toLocaleString(),")")),r.a.createElement("td",null,e.deaths.toLocaleString(),r.a.createElement("span",null,"(",m.toLocaleString(),")")),r.a.createElement("td",null,i.toFixed(2),"%"),r.a.createElement("td",null,e.recovered.toLocaleString(),r.a.createElement("span",null,"(",p.toLocaleString(),")")),r.a.createElement("td",null,c.toFixed(2),"%"),r.a.createElement("td",null,s.toLocaleString(),r.a.createElement("span",null,"(",f.toLocaleString(),")")),r.a.createElement("td",null,d.toFixed(2),"%"))});return r.a.createElement("tbody",null,e)}get footer(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,"Confirmed"),r.a.createElement("td",null,"Deaths"),r.a.createElement("td",null,"%"),r.a.createElement("td",null,"Recovered"),r.a.createElement("td",null,"%"),r.a.createElement("td",null,"Active"),r.a.createElement("td",null,"%")))}render(){const e=new m.a([]);return r.a.createElement("div",{className:p},r.a.createElement("h1",null,e.name(this.props.model)),r.a.createElement("table",null,this.header,this.body,this.footer))}}f.displayName="Country",f.propTypes={model:m.b};const h=Object(i.c)(e=>({model:e.model}));class E extends a.PureComponent{render(){const e=this.props.match.params.country,t=this.props.match.params.state,n=new m.a(this.props.model).find(e,t);if(this.props.model&&this.props.model.length&&!n)return r.a.createElement(s.a,{to:"/"});const a=n?r.a.createElement(f,{model:n}):r.a.createElement("h1",null,"Loading...");return r.a.createElement(d.a,null,r.a.createElement("div",{className:c},a))}}E.displayName="IndexPageComponent",E.propTypes={model:o.a.arrayOf(u.a).isRequired};const v=h(E);t.default=v}}]);